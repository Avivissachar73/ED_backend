(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],u=0,h=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0e40":function(t){t.exports=JSON.parse('{"hello":"Hello","filter":"Filter","edit":"Edit","submit":"Submit","signup":"Signup","login":"Login","about":"About","settings":"Settings","example":"Example","admin":"Admin","logout":"Logout","delete":"Delete","addNew":"Add new","darkMode":"Dark mode"}')},"0ecf":function(t,e,s){"use strict";s("b028")},"0fd2":function(t,e,s){"use strict";s("cc8b")},2768:function(t,e,s){},"27d7":function(t,e,s){},"34ae":function(t,e,s){},3615:function(t,e,s){t.exports={fontSizeSmaller:"12px",fontSizeSmall:"100px",fontSizeNormal:"15px",fontSizeMedium:"17px",fontSizeBig:"18px",appFont:"sans-serif",smallScreenBreak:"800px",mediumScreenBreak:"1200px",bigScreenBreak:"1500px",clr1:"#000",clr2:"gray",clr3:"blue",clrSafe:"green",clrWarn:"#ff0",clrDanger:"red",lightShadow:"0px 0px 10px 1px rgba(0,0,0,0.1)"}},"3e94":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t._self._c;return t.settings?e("div",{staticClass:"app",class:{rtl:t.isRtl,dark:t.isDarkMode},attrs:{id:"app"}},[e("div",{staticClass:"app-content"},[e("AppAside"),e("div",{staticClass:"right"},[e("AppHeader",{on:{action:function(e){t.isLoading=!0},endAction:function(e){t.isLoading=!1}}}),e("main",{staticClass:"app-main"},[e("router-view",{staticClass:"main-content"})],1)],1)],1),e("AppFooter")],1):t._e()},i=[],o=(s("14d9"),function(){var t=this,e=t._self._c;return e("header",{staticClass:"app-header flex align-center"},[e("div",{staticClass:"container width-all flex align-center space-between"},[e("router-link",{attrs:{to:{name:"HomePage"}}},[e("CreditLogo")],1),e("button",{staticClass:"nav-burger",on:{click:function(e){t.mobileShow=!t.mobileShow}}},[e("img",{attrs:{src:s("9c83")}})]),t.mobileShow?e("div",{staticClass:"blure",on:{click:function(e){t.mobileShow=!1}}}):t._e(),e("nav",{class:{show:t.mobileShow}},[e("router-link",{attrs:{to:{name:"SettingsPage"}}},[t._v(t._s(t.$t("settings")))]),t.isAdmin?e("router-link",{attrs:{to:{name:"EdMsgEdit"}}},[t._v(t._s(t.$t("msgs")))]):t._e(),t.loggedUser?[e("router-link",{attrs:{to:{name:"EdMapPage"}}},[t._v("ED")]),e("button",{on:{click:t.logout}},[t._v(t._s(t.$t("logout")))])]:e("router-link",{attrs:{to:{name:"LoginPage"}}},[t._v(t._s(t.$t("login")))])],2)],1)])}),l=[],c=function(){var t=this;t._self._c;return t._m(0)},d=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"credit-logo"},[t._v("Aviv"),e("span",[t._v("Js")])])}],u={name:"CreditLogo"},p=u,g=(s("8b82"),s("2877")),m=Object(g["a"])(p,c,d,!1,null,null,null),f=m.exports,v={name:"AppHeader",data(){return{mobileShow:!1}},computed:{loggedUser(){return this.$store.getters["auth/loggedUser"]},isAdmin(){return this.$store.getters["auth/isAdmin"]}},methods:{async logout(){this.$emit("action");try{await this.$store.dispatch("auth/logout"),this.$router.push({name:"LoginPage"})}catch(t){}this.$emit("endAction")}},watch:{"$route.path"(){this.mobileShow=!1}},components:{CreditLogo:f}},b=v,S=(s("e7e6"),Object(g["a"])(b,o,l,!1,null,"70cbe306",null)),C=S.exports,A=function(){var t=this,e=t._self._c;return e("footer",{staticClass:"app-footer flex-center"},[e("div",{staticClass:"container"},[e("CreditLogo")],1)])},D=[],P={name:"AppFooter",components:{CreditLogo:f}},_=P,O=Object(g["a"])(_,A,D,!1,null,null,null),L=O.exports,z=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"app-aside flex column"},[e("router-link",{staticClass:"logo",attrs:{to:{name:"HomePage"}}},[t._v("E.D")]),e("nav",{staticClass:"flex column"},[e("router-link",{attrs:{to:{name:"AboutPage"}}},[t._v("!")]),e("router-link",{attrs:{to:{name:"SettingsPage"}}},[t._v("S")])],1)],1)},M=[],E={name:"AppAside"},k=E,I=(s("d1cc"),Object(g["a"])(k,z,M,!1,null,"5bcafa49",null)),R=I.exports,T=s("daa8");s("13d5"),s("d9e2");function j(){var t=Date.now().toString(16),e=B(1e3,9999).toString(16),s=B(1e3,9999).toString(16);return`${s}-${t}-${e}`.toUpperCase()}function B(t,e){var s=t>=e?t+1:e+1,a=t<=e?t:e;return Math.floor(Math.random()*(s-a))+a}function $(t){const e="0123456789ABCDEF",s=t?8:6;var a="#";for(let n=0;n<s;n++)a+=e[B(0,e.length-1)];return a}function F(t,e,s,a="."){const n=e.split(a),i=n.shift();n.length?(t[i]||(t[i]={}),F(t[i],n.join(a),s)):t[i]=s}function N(t){const e={y:0,x:0};if(!t)return e;let s=t;while("BODY"!==s.tagName)e.y+=s.offsetTop,e.x+=s.offsetLeft,s=s.offsetParent;return e}function U(t,e,s=".",a=""){for(let n in t){let i=t[n];const o=a?`${a}${s}${n}`:n;"object"===typeof i?U(i,e,s,o):e(o,i)}}function q(t=2e3){return new Promise(e=>{setTimeout(e,t)})}var Y=s("bc3a"),H=s.n(Y);H.a.default.withCredentials=!0;const W="api/";async function X(t="",e="get",s={},a={},n={}){try{const i=await H()({url:W+t,method:e,data:s,params:a,headers:n,withCredentials:!0});return i.data}catch(i){return G(i)}}const J={url:W,ajax:X,get:(t,e)=>X(t,"GET",{},e),post:(t,e,s)=>X(t,"POST",e,{},s),put:(t,e)=>X(t,"PUT",e),delete:(t,e)=>X(t,"DELETE",e),download:V};async function V(t,e){const s=`${W}${t}${(void 0).getQuerysStr(e)}`;let a,n;try{const t=await fetch(s,{credentials:"include"});if(200!==t.status)throw{...await t.json(),status:t.status};const e=t.headers.get("content-disposition");a=e.slice(e.indexOf("=")+1),n=await t.blob()}catch(r){return G(r)}const i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=a,o.click()}function G(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||t}const Z="/";var K=null;const Q={connect:at,disconnect:nt,on:tt,off:et,emit:st};function tt(t,e){var s;null===(s=K)||void 0===s||s.on(t,e)}function et(t,e){var s;null===(s=K)||void 0===s||s.off(t,e)}function st(t,...e){var s;null===(s=K)||void 0===s||s.emit(t,...e)}function at(){return K||(K=Object(T["a"])(Z,{withCredentials:!0}),K)}function nt(){K&&(K.disconnect(),K=null)}var it=s("ade3");class ot{constructor(){Object(it["a"])(this,"Events",{}),Object(it["a"])(this,"on",(t,e)=>(this.Events[t]||(this.Events[t]=[]),this.Events[t].push(e),()=>this.off(t,e))),Object(it["a"])(this,"off",(t,e)=>{if(e){var s=this.Events[t].findIndex(t=>t===e);-1!==s&&this.Events[t].splice(s,1)}else delete this.Events[t]}),Object(it["a"])(this,"emit",(t,...e)=>{this.Events[t]&&this.Events[t].forEach(t=>t(...e))})}}var rt=new ot,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"loader"},[e("div",{staticClass:"blure"}),e("AnimationLoader",{staticClass:"preview"})],1)},ct=[],dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"animated-loader-container"})},ut=[];class ht{constructor(t=[],e={selector:"body",context:null,bgc:"white",enableZoom:!1,enableScrollUi:!1,enableZoomUi:!1,enableFlipUi:!1,enableMirrorUi:!1,initZoomLevel:1,initRootRenderPos:{x:0,y:0},loadImgCb:null,enableAnimation:!1,flipLevel:1,grid:{x:0,y:0,style:{}}},s=null,a={}){Object(it["a"])(this,"elParent",null),Object(it["a"])(this,"element",null),Object(it["a"])(this,"elCanvas",null),Object(it["a"])(this,"context",null),Object(it["a"])(this,"isDragOn",!1),Object(it["a"])(this,"scrollSizes",null),Object(it["a"])(this,"lastZoomPos",null),Object(it["a"])(this,"zoomLevel",1),Object(it["a"])(this,"rootRenderPos",{x:0,y:0}),Object(it["a"])(this,"isRenderData",!0),Object(it["a"])(this,"windowEvsMap",{}),Object(it["a"])(this,"resizeObserver",null),Object(it["a"])(this,"intervals",{}),Object(it["a"])(this,"isMirrorX",!1),Object(it["a"])(this,"isMirrorY",!1),Object(it["a"])(this,"inited",!1),Object(it["a"])(this,"mapedStaticShapesToRender",[]),Object(it["a"])(this,"lastRenderData",null),Object(it["a"])(this,"reqAnimations",{}),Object(it["a"])(this,"nextAnimateId",0),this.id="fucking-legendary-canvas-"+this.constructor.id++,this.board=t,this.canvasOpts=e,this.getCellContectCb=s,this.listeners=a,this.setup(),this.inited=!0}setup(){if(this.isServeMode)return this.init();const{canvasOpts:t}=this,e=this.elParent=document.querySelector(t.selector);e.innerHTML="";const s=document.createElement("div");this.elCanvasContainer=s,s.style="position:relative;display:flex;align-items:center;justify-content:center;",s.id=this.id,this.element=s;const a=document.createElement("canvas");this.context=a.getContext("2d"),this.elCanvas=a,s.appendChild(a),e.appendChild(s);for(let n in this.listeners)"render"!==n&&a.addEventListener(n,t=>{const e=this.flipItem(this.getBoardPosFromCanvasDomEvent(t));this.listeners[n](t,{x:e.x,y:e.y},this)});t.enableZoom&&this.setZoomDomEvMethods(),this.init(),this.setResizeEvents(),t.initZoomLevel&&this.updateZoomLevel(t.initZoomLevel-this.zoomLevel),t.initRootRenderPos&&this.updateRootRenderPos(this.convertBoardSizeToCanvasSize(t.initRootRenderPos)),t.flipLevel&&this.updateFlipLevel(t.flipLevel,!0)}init(){if(this.isServeMode)return this.canvasSize={...this.boardSize},this.context=this.canvasOpts.context,void this.render();const t=this.calcCanvasSize();this.canvasSize=t,this.elCanvas.width=t.w,this.elCanvas.height=t.h,this.setScrollSize(),this.setElActionPositions(),this.resetMapedStaticShapesToRender(),this.render()}get selector(){return"#"+this.id}get isMatrixBoard(){return Array.isArray(this.board)}get boardSize(){const{board:t}=this,e=t.height||t.length,s=t.width||t[0].length;return{w:s,h:e}}get boardToCanvasRatio(){return this.canvasSize.w/this.boardSize.w}get cellSizeByboardToCanvasRatio(){const{w:t,h:e}=this.canvasSize,{w:s,h:a}=this.boardSize;let n=e/a,i=t/s;return n*=this.zoomLevel,i*=this.zoomLevel,{w:i,h:n}}get renderedCanvasSize(){const{zoomLevel:t,canvasSize:e}=this;return{w:e.w*t,h:e.h*t}}get viewdArea(){const{rootRenderPos:t,canvasSize:e,zoomLevel:s}=this,a=t.x/s,n=t.y/s,i=this.convertBoardSizeToCanvasSize(e,!0),o=a+i.w,r=n+i.h;return{startX:a,startY:n,endX:o,endY:r}}get canvasRootRenderPos(){const{rootRenderPos:t,boardToCanvasRatio:e}=this;return{x:t.x*e,y:t.y*e}}get isServeMode(){return this.canvasOpts.context&&!0}static parseRenderOpts(t={},e={},s){t=pt.copy(t),e=pt.copy(e);const a={hide:t.hide,x:t.x,y:t.y,w:t.w,h:t.h,zIndex:t.zIndex||0,rotate:t.rotate,isCenterPos:t.isCenterPos||(t.circleDegries||e.circleDegries)&&!0,geoShape:t.geoShape,img:t.img,circleDegries:t.circleDegries,closeCircle:t.closeCircle,text:t.text,strictW:t.strictW,strictH:t.strictH,strictX:t.strictX,strictY:t.strictY,strictR:t.strictR,mirror:t.mirror,scale:t.scale,strictScale:t.strictScale,dontScale:t.dontScale,style:t.style&&{fillStyle:t.style.fillStyle,strokeStyle:t.style.strokeStyle,font:t.style.font,lineWidth:t.style.lineWidth,strictLineWidth:t.style.strictLineWidth,textAlign:t.style.textAlign,textBaseline:t.style.textBaseline,circleCounterClockWise:t.style.circleCounterClockWise,lineCap:t.style.lineCap,clear:t.style.clear,shadowBlur:t.style.shadowBlur,shadowColor:t.style.shadowColor,shadowOffsetX:t.style.shadowOffsetX,shadowOffsetY:t.style.shadowOffsetY}||{},grid:t.grid&&{style:t.grid.style,align:t.grid.align,space:t.grid.space,strictSpace:t.grid.strictSpace,rotate:t.grid.rotate,x:t.grid.x&&"object"===typeof t.grid.x&&{space:t.grid.x.space,strictSpace:t.grid.x.strictSpace,style:t.grid.x.style,align:t.grid.x.align,rotate:t.grid.x.rotate}||t.grid.x,y:t.grid.y&&"object"===typeof t.grid.y&&{strictSpace:t.grid.y.strictSpace,space:t.grid.y.space,style:t.grid.y.style,align:t.grid.y.align,rotate:t.grid.y.rotate}||t.grid.y},flip:!("flip"in t)||t.flip,children:t.children||[],...e};return a.circleDegries&&!Array.isArray(a.circleDegries)&&(a.circleDegries=[0,a.circleDegries]),s&&[["strictX","x"],["strictY","y"],["strictR","rotate"]].forEach(t=>{const[e,n]=t,i=void 0!==s[n],o=void 0!==s[e];(i||o)&&(o?a[e]=s[e]+("number"===typeof a[e]?a[e]:a[n]||0):a[n]=s[n]+(a[n]||0))}),a}fixRenderOptsStyle(t){const e=this.cellSizeByboardToCanvasRatio.w,s=t=>(t.linePattern&&(t.linePattern=t.linePattern.map(t=>t*e)),t.lineWidth&&(t.lineWidth*=e),t.shadowBlur&&(t.shadowBlur*=e),t.shadowOffsetX&&(t.shadowOffsetX*=e),t.shadowOffsetY&&(t.shadowOffsetY*=e),t);s(t.style),t.grid&&(t.grid.style&&(t.grid.style=s({...t.grid.style})),t.grid.space*=e,"object"===typeof t.grid.x?(t.grid.x.space*=e,t.grid.x.style&&(t.grid.x.style=s({...t.grid.x.style}))):t.grid.x*=e,"object"===typeof t.grid.y?(t.grid.y.space*=this.cellSizeByboardToCanvasRatio.h,t.grid.y.style&&(t.grid.y.style=s({...t.grid.y.style}))):t.grid.y*=this.cellSizeByboardToCanvasRatio.h)}getRenderOpts(t={},e={},s=null){var a,n,i;let o=this.constructor.parseRenderOpts(t,e,s);return null!==(a=o.children)&&void 0!==a&&a.length&&(o.children=o.children.map(t=>this.getRenderOpts(void 0,t,{...o}))),this.fixRenderOptsStyle(o),o=this.flipItem(o),o={...o,geoShape:null===(n=o.geoShape)||void 0===n?void 0:n.map(t=>this.convertBoardSizeToCanvasSize(t)),...this.getDrawOpts({w:o.w||0,h:o.h||0,x:o.x||0,y:o.y||0})},o.geoShape&&null!==(i=o.style.gradientBgc)&&void 0!==i&&i.autoCalcGeoShapeSize&&(o.style.gradientBgc.gradientSize=gt.getPolygonSize(o.geoShape)),o.grid&&o.children.push(...this.constructor.getGridLines({x:o.x,y:o.y,rotate:o.rotate,w:o.w,h:o.h},o.grid)),o}renderShape(t){if(!t.hide){if(t.img&&!(t.img instanceof Image)){const e=this.constructor.imgSrcMap;if(!e[t.img])return void this.loadImage(t.img).then(s=>{e[t.img]=s,this.render()});t.img=e[t.img]}this.doRenderData(t)}}loadImage(t){return this.canvasOpts.loadImgCb?this.loadImgCb(t):new Promise((e,s)=>{const a=new Image;a.src=t,a.onload=()=>e(a)})}doRenderData(t){var e;const{context:s}=this;let a=t.strictW||t.w,n=t.strictH||t.h,i=-a/2,o=-n/2;if(s.save(),t.strictX||t.strictY?s.translate(t.strictX||t.x||0,t.strictY||t.y||0):t.isCenterPos?s.translate(t.x||0,t.y||0):s.translate(t.centerX,t.centerY),(t.rotate||t.strictR)&&s.rotate(("number"===typeof t.strictR?t.strictR:t.rotate)*Math.PI/180),t.strictScale&&!t.dontScale?s.scale(t.strictScale[0],t.strictScale[1]):t.scale&&!t.dontScale&&s.scale(t.scale[0],t.scale[1]),t.img)s.drawImage(t.img,i,o,a,n);else{const{style:e}=t;if(s.beginPath(),e.gradientBgc){const t=e.gradientBgc.gradientSize||{w:a,h:n},i=(e.gradientBgc.angle||0)/180*Math.PI,o=s.createLinearGradient(0,0,t.w*Math.cos(i),t.h*Math.sin(i));e.gradientBgc.colors.forEach(t=>o.addColorStop(t.offset,t.val)),s.fillStyle=o}else e.fillStyle&&(s.fillStyle=e.fillStyle);if(e.strokeStyle&&(s.strokeStyle=e.strokeStyle),e.strictLineWidth?s.lineWidth=e.strictLineWidth:e.lineWidth&&(s.lineWidth=e.lineWidth),e.strictLinePattern?s.setLineDash(e.strictLinePattern):e.linePattern&&s.setLineDash(e.linePattern),e.lineCap&&(s.lineCap=e.lineCap),e.shadowBlur&&(s.shadowBlur=e.shadowBlur),e.shadowColor&&(s.shadowColor=e.shadowColor),e.shadowOffsetX&&(s.shadowOffsetX=e.shadowOffsetX),e.shadowOffsetY&&(s.shadowOffsetY=e.shadowOffsetY),t.geoShape)t.geoShape.forEach((t,e)=>{e?s.lineTo(t.x,t.y):s.moveTo(t.x,t.y)});else if(t.circleDegries){const i=t.circleDegries,o=gt.degToRadian(i[0]||0),r=gt.degToRadian(i[1]||360),l={x:0,y:0};t.closeCircle&&s.lineTo(l.x,l.y),s.ellipse(l.x,l.y,a/2,n/2,0,o,r,e.circleCounterClockWise)}else t.text?(s.font&&(s.font=a+"px "+e.font||"Ariel"),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline),(e.fillStyle||e.gradientBgc)&&s.fillText(t.text,0,0),e.strokeStyle&&s.strokeText(t.text,0,0)):((e.fillStyle||e.gradientBgc)&&s.fillRect(i,o,a,n),e.strokeStyle&&s.rect(i,o,a,n));e.clear?(s.clip(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this.canvasSize.w,this.canvasSize.h)):((e.fillStyle||e.gradientBgc||e.shadowColor)&&s.fill(),e.strokeStyle&&s.stroke()),s.closePath()}s.restore(),null!==(e=t.children)&&void 0!==e&&e.length&&t.children.forEach(t=>this.renderShape(t))}renderCell(t,e={y:t.i||t.y,x:t.j||t.x}){const s=this.getDynamicRenderOpts(t,e);s.forEach(t=>this.renderShape(t))}getDynamicRenderOpts(t,e={y:t.i||t.y,x:t.j||t.x}){if(t.hide)return[];const s=this.getDrawOpts({...this.flipItem({x:e.x,y:e.y,w:t.w,h:t.h})});let a=this.getCellContectCb?this.getCellContectCb(t,s,this.context,this):{};return a?Array.isArray(a)||(a=[a]):a=[],a.map(e=>this.getRenderOpts(t,e))}getBgAutoStaticShapes(){const t={x:0,y:0,...this.boardSize},e=[];return this.canvasOpts.bgc&&e.push({...t,style:{fillStyle:this.canvasOpts.bgc}}),this.canvasOpts.grid&&e.push({...t,grid:this.canvasOpts.grid}),e}resetMapedStaticShapesToRender(){this.mapedStaticShapesToRender=null}getStaticShapesToRender(){return this.mapedStaticShapesToRender||(this.mapedStaticShapesToRender=[...this.getBgAutoStaticShapes(),...this.board.staticShapes].map(t=>this.getRenderOpts(t))),this.mapedStaticShapesToRender}render(){const{context:t}=this;t.clearRect(0,0,this.canvasSize.w,this.canvasSize.h);const{board:e}=this;if(this.isMatrixBoard)this.isRenderData&&(this.getBgAutoStaticShapes().forEach(t=>this.renderShape(this.getRenderOpts(t))),e.forEach((t,e)=>t.forEach((t,s)=>this.renderCell(t,{y:e,x:s}))));else{const t=[];t.push(...this.getStaticShapesToRender()),e.shapes&&this.isRenderData&&t.push(...e.shapes.reduce((t,e)=>[...t,...this.getDynamicRenderOpts(e)],[])),t.sort((t,e)=>t.zIndex-e.zIndex),t.forEach(t=>this.renderShape(t))}this.listeners.render&&this.listeners.render()}debounceRender(t=!1){!this.lastRenderData||t?(this.render(),this.lastRenderData={render:!1,at:new Date,timeout:setTimeout(()=>{var t;const e=null===(t=this.lastRenderData)||void 0===t?void 0:t.render;this.lastRenderData=null,e&&this.debounceRender()},10)}):this.lastRenderData.render=!0}set board(t){t||(t={width:1e4,height:1e4}),this._board={...t};const{_board:e}=this;this.isMatrixBoard||(e.staticShapes||(e.staticShapes=[]),e.shapes||(e.shapes=[]),e.width||(e.width=1),e.height||(e.height=1))}get board(){return this._board}doUpdateCell(t,e,s){const{isMatrixBoard:a,board:n}=this;if(a){const s=n[t.y][t.x];n[t.y][t.x]={...s,...e}}else{const t=s?n.shapes.findIndex(s):-1,a=n.shapes[t];if(-1!==t){if(this.canvasOpts.enableAnimation&&!e.hide&&!a.hide)return this.doAnimationCellUpdate(e,s);n.shapes.splice(t,1,{...a,...e})}else n.shapes.push(e)}}updateCell(t,e,s=(t=>t.id===e.id)){this.doUpdateCell(t,e,s),this.debounceRender()}updateCells(t=[],e=(e=>s=>s.id===t[e].id)){t.forEach((t,s)=>this.doUpdateCell({y:t.i||t.y,x:t.j||t.x},t,e&&e(s))),this.debounceRender()}removeCell(t=(t=>t.id===cell.id)){let e;e="function"===typeof t?this.board.shapes.findIndex(t):this.board.shapes.findIndex(e=>e===t),-1!==e&&(this.board.shapes.splice(e,1),this.debounceRender())}removeCells(t=(t=>t.id===cell.id)){const e=[],s=this.board.shapes.filter((s,a)=>!("function"===typeof t&&t(s)||Array.isArray(t)&&t.includes(s))||(e.push(s),!1),[]);return this.board.shapes=s,this.debounceRender(),e}updateBoard(t){this.board=t,this.init()}doAnimationCellUpdate(t,e){const{board:s}=this,a=s.shapes.findIndex(e),n=s.shapes[a],i={...n,...t},o={x:i.x-n.x,y:i.y-n.y,w:i.w-n.w,h:i.h-n.h,rotate:i.rotate-n.rotate||0},r=this.reqAnimations,l=t.id;r[l]||(r[l]={});const c=this.nextAnimateId++;r[l].id=c;const d=[10,20,35,50,65,80,90,100];let u=0;const h=()=>{var t,a;if((null===(t=r[l])||void 0===t?void 0:t.id)!==c)return;const p=d[u]/100;if(!p)return;const g={...i};Object.keys(o).forEach(t=>{const e=n[t]+o[t]*p;"number"!==typeof e&&(e=i[t]),g[t]=e});const m=s.shapes.findIndex(e);s.shapes.splice(m,1,g),this.debounceRender(),u<=d.length&&(null===(a=r[l])||void 0===a?void 0:a.id)===c?(requestAnimationFrame(h),u++):delete r[l]};requestAnimationFrame(h)}getPosOpts(t={x:0,y:0}){const{w:e,h:s}=this.cellSizeByboardToCanvasRatio;let{x:a,y:n}=this.convertBoardSizeToCanvasSize(t);return a-=this.canvasRootRenderPos.x,n-=this.canvasRootRenderPos.y,{x:a,y:n,actualX:a-e/2,actualY:n-s/2}}convertBoardSizeToCanvasSize(t={w:1,h:1,x:0,y:0},e=!1){const{w:s}=this.cellSizeByboardToCanvasRatio,a={};for(let n in t)a[n]=e?t[n]/s:t[n]*s;return a}getDrawOpts(t={x:0,y:0,w:1,h:1}){const e=this.getPosOpts({x:t.x+t.w/2,y:t.y+t.h/2});return{boardPos:{x:t.x,y:t.y},...this.getPosOpts({x:t.x,y:t.y}),...this.convertBoardSizeToCanvasSize({w:t.w,h:t.h}),centerX:e.x,centerY:e.y,zoomLevel:this.zoomLevel}}getBoardPosFromCanvasDomEvent(t){let{x:e,y:s}=this.constructor.getOffsetPosFomDomEvent(t);const{boardSize:a,canvasSize:n,canvasRootRenderPos:i}=this;e+=i.x,s+=i.y;const o=a.h/(n.h*this.zoomLevel),r=a.w/(n.w*this.zoomLevel),l=e*r,c=s*o;return{x:l,y:c}}static getOffsetPosFomDomEvent(t,e){return e&&t.clientX?{x:t.clientX,y:t.clientY}:"number"===typeof t.offsetX?{x:t.offsetX,y:t.offsetY}:{x:t.touches[0].clientX-t.touches[0].target.offsetLeft,y:t.touches[0].clientY-t.touches[0].target.offsetTop}}calcCanvasSize(){const{boardSize:t,elParent:e}=this,s={w:e.offsetWidth,h:e.offsetHeight},a=gt.fitParentSize(s,t);return a}setZoomDomEvMethods(){this.elCanvas.addEventListener("wheel",t=>{t.preventDefault(),t.wheelDelta&&this.updateZoomLevel(t.wheelDelta>0?.1:-.1,this.constructor.getOffsetPosFomDomEvent(t))});let t=null;this.elCanvas.addEventListener("touchmove",e=>{if(e.preventDefault(),e.touches.length<2)return;this.isDragOn&&(this.isDragOn=!1);const[s,a]=e.touches,n=Math.hypot(s.pageX-a.pageX,s.pageY-a.pageY);if(!t)return t=n;const i=t-n,o=pt.getElPosOnScreen(this.elCanvas);this.updateZoomLevel(i<0?.025:-.025,{x:(s.clientX+a.clientX)/2-o.x,y:(s.clientY+a.clientY)/2-o.y}),t=n}),this.elCanvas.addEventListener("toucend",e=>{e.preventDefault(),e.touches.length<2||(t=null)});let e=null;["mousedown","touchstart"].forEach(t=>this.elCanvas.addEventListener(t,t=>{t.preventDefault(),t.touches&&t.touches.length>1||1!==this.zoomLevel&&(e=this.constructor.getOffsetPosFomDomEvent(t,!0),this.isDragOn=!0,this.elCanvas.style.cursor="grabbing")})),["mousemove","touchmove"].forEach(t=>this.addWindowEventListener(t,t=>{if(!this.isDragOn)return;let s=this.constructor.getOffsetPosFomDomEvent(t,!0);if(!e)return e=s;this.updateRootRenderPos({x:e.x-s.x,y:e.y-s.y}),e=s})),["mouseup","touchend","touchcancel"].forEach(t=>this.addWindowEventListener(t,t=>{e=null,this.isDragOn=!1,this.elCanvas.style.cursor=""})),(this.canvasOpts.enableScrollUi||this.canvasOpts.enableZoomUi||this.canvasOpts.enableFlipUi||this.canvasOpts.enableMirrorUi)&&this.elCanvasContainer.appendChild(this.getActionsElement())}updateRootRenderPos(t={x:0,y:0},e=!1){const{rootRenderPos:s,boardToCanvasRatio:a}=this;t.x/=a,t.y/=a,s.x=e?t.x:s.x+t.x,s.y=e?t.y:s.y+t.y,this.validateRootRenderPos(),this.setScrollSize(),this.resetMapedStaticShapesToRender(),this.render()}validateRootRenderPos(){const{rootRenderPos:t,viewdArea:e,renderedCanvasSize:s,canvasSize:a,boardSize:n,boardToCanvasRatio:i}=this,o={x:(s.w-a.w)/i,y:(s.h-a.h)/i};e.startX<0&&(t.x=0),e.startY<0&&(t.y=0),e.endX>n.w&&(t.x=o.x),e.endY>n.h&&(t.y=o.y)}updateZoomLevel(t=0,e){const{canvasSize:s,lastZoomPos:a}=this;e||(e=a||{x:s.w/2,y:s.h/2});const n=this.zoomLevel;if(this.zoomLevel+=t,this.zoomLevel<1&&(this.zoomLevel=1),this.zoomLevel>5&&(this.zoomLevel=5),n===this.zoomLevel)return;const i=this.zoomLevel-n,o={w:e.x/s.w,h:e.y/s.h},r={x:s.w*o.w,y:s.h*o.h};a&&(r.x+=e.x-a.x,r.y+=e.y-a.y),r.x*=i,r.y*=i,1===this.zoomLevel?this.lastZoomPos=null:this.lastZoomPos=e,this.updateRootRenderPos(r,!1)}setScrollSize(){let{scrollSizes:t,canvasRootRenderPos:e,renderedCanvasSize:s,canvasSize:a}=this;t||(this.scrollSizes=t={vertical:{pad:0,size:0},horizontal:{pad:0,size:0}}),t.vertical.pad=e.y/s.h*100,t.horizontal.pad=e.x/s.w*100,t.vertical.size=a.w/s.w*100,t.horizontal.size=a.h/s.h*100,this.updateElScrollsStyle()}flipItem(t={},e){let{flipLevel:s,isMirrorX:a,isMirrorY:n,boardSize:i,isSizeFlipped:o}=this;const r=t=>t>0?360===t&&t||t%360:(360+t)%360;if(1===s&&!a&&!n)return t;const l=i,c=t.rotate||0,d=t.x||0,u=t.y||0;let h=t.w||0,p=t.h||0,g=t.scale||[1,1],m=d+(t.isCenterPos?0:h),f=u+(t.isCenterPos?0:p);const y={...t,x:d,y:u,w:h,h:p,rotate:c,scale:g};a&&(y.x=l.w-m,y.rotate=r(-c),y.scale[0]*=-1,m=y.x+(t.isCenterPos?0:y.w)),n&&(y.y=l.h-f,y.rotate=r(180-y.rotate+180),y.scale[1]*=-1,f=y.y+(t.isCenterPos?0:y.h));const v={x:i.w/2,y:i.h/2},x={x:m,y:f};let b=0;switch(s){case 1:return y;case 3:b=180;break;case 2:b=90;break;case 4:b=270}return{...y,...gt.rotatePosition(x,b,v),rotate:r(y.rotate+b)}}updateFlipLevel(t=1,e=!1){e?this.flipLevel=t:this.flipLevel+=t,this.init()}set flipLevel(t){[1,2,3,4].includes(t)||(t=1),this._flipLevel=t}get flipLevel(){return this._flipLevel||1}toggleMirrorX(t){this.isMirrorX="boolean"===typeof t?t:!this.isMirrorX,this.init()}toggleMirrorY(t){this.isMirrorY="boolean"===typeof t?t:!this.isMirrorY,this.init()}get isSizeFlipped(){return[2,4].includes(this.flipLevel)}updateElScrollsStyle(){const{scrollSizes:t}=this,e=this.elCanvasContainer.querySelector(".actions");e&&e.querySelectorAll(".grab").forEach(e=>{const s=e.classList.contains("vertical");s?(e.style.height=t.vertical.size+"%",e.style.top=t.vertical.pad+"%"):(e.style.width=t.horizontal.size+"%",e.style.left=t.horizontal.pad+"%")})}getActionsElement(){let t="",e=null;const{enableZoomUi:s,enableScrollUi:a,enableFlipUi:n,enableMirrorUi:i}=this.canvasOpts,{El:o}=mt,r=o('<div class="actions"></div>',{},[o(`<style>${this.constructor.getActionsStyleStr(this.selector)}</style>`),s&&o('<div class="zoom-btns control-section"></div>',{},[o('<button class="icon plus-btn"></button>',{onclick:()=>this.updateZoomLevel(.1)}),o('<button class="icon minus-btn"></button>',{onclick:()=>this.updateZoomLevel(-.1)})]),a&&o('<div class="scrolls"></div>',{},[o('<div class="scroll-container horizontal control-section"></div>',{},[o('<button class="icon plus-btn"></button>',{onclick:()=>this.updateRootRenderPos({y:0,x:-30})}),o('<div class="scroll"></div>',{},[o('<div class="grab horizontal"></div>',{onmousedown:()=>t="horizontal"})]),o('<button class="icon minus-btn"></button>',{onclick:()=>this.updateRootRenderPos({y:0,x:30})})]),o('<div class="scroll-container vertical control-section"></div>',{},[o('<button class="icon plus-btn"></button>',{onclick:()=>this.updateRootRenderPos({y:-30,x:0})}),o('<div class="scroll"></div>',{},[o('<div class="grab vertical"></div>',{onmousedown:()=>t="vertical"})]),o('<button class="icon minus-btn"></button>',{onclick:()=>this.updateRootRenderPos({y:30,x:0})})])]),(n||i)&&o('<div class="flip-btns control-section"></div>',{},[n&&o('<button class="icon flip-btn" title="Flip 180"></button>',{onclick:()=>this.updateFlipLevel(2)}),i&&o('<button class="icon mirror-x-btn" title="Mirror X"></button>',{onclick:()=>this.toggleMirrorX()}),i&&o('<button class="icon mirror-y-btn" title="Mirror Y"></button>',{onclick:()=>this.toggleMirrorY()})])]);return this.canvasOpts.enableScrollUi?(["mousemove","touchmove"].forEach(s=>this.addWindowEventListener(s,s=>{if(this.isDragOn)return;if(!t)return;const a={x:s.clientX,y:s.clientY};if(!e)return e=a;const n="vertical"===t,i=n?a.y-e.y:a.x-e.x;this.updateRootRenderPos({x:n?0:i*this.zoomLevel,y:n?i*this.zoomLevel:0}),e=a})),["mouseup"].forEach(s=>this.addWindowEventListener(s,s=>{e&&(e=null,t="")})),r):r}setElActionPositions(){const{element:t,canvasSize:e}=this,s={w:(t.offsetWidth-e.w)/2||0,h:(t.offsetHeight-e.h)/2||0},a=t.querySelector(".actions");if(a){if(a.querySelectorAll(".scroll-container").forEach(t=>{t.classList.contains("horizontal")?(t.style.bottom=s.h+10+"px",t.style.width=.7*e.w+"px"):(t.style.right=s.w+10+"px",t.style.height=.7*e.h+"px")}),this.canvasOpts.enableZoomUi){const t=a.querySelector(".zoom-btns");t.style.bottom=s.h+10+"px",t.style.left=s.w+10+"px"}if(this.canvasOpts.enableFlipUi||this.canvasOpts.enableMirrorUi){const t=a.querySelector(".flip-btns");t.style.top=s.h+10+"px",t.style.left=s.w+10+"px",this.canvasOpts.enableMirrorUi&&(t.querySelector(".mirror-x-btn").classList[this.isMirrorX?"add":"remove"]("on"),t.querySelector(".mirror-y-btn").classList[this.isMirrorY?"add":"remove"]("on"))}}}addWindowEventListener(t,e){this.windowEvsMap[t]||(this.windowEvsMap[t]=[]),this.windowEvsMap[t].push(e),window.addEventListener(t,e)}removeWindowEventListeners(){const{windowEvsMap:t}=this;for(let e in t){const s=t[e];s.forEach(t=>window.removeEventListener(e,t))}this.resizeObserver.unobserve(this.elParent),this.resizeObserver.disconnect(),Object.values(this.intervals).forEach(clearInterval)}setResizeEvents(){this.resizeObserver=new ResizeObserver(this.init.bind(this)),this.resizeObserver.observe(this.elParent)}static isPosOnItem(t,e,s=!1){var a;e=this.parseRenderOpts(e);let n=e.geoShape,i=e.x&&{x:e.x,y:e.y}||void 0;if(e.circleDegries){if(gt.isPosInEllipse(t,e,i))return!0}else n||(e.isCenterPos||(i=e.x&&{x:e.x+e.w/2,y:e.y+e.h/2}||void 0),n=gt.rectToPolygon(e,i));return!(!n||!gt.isPosOnPoligon(t,n,e.rotate,i,!s,s))||!(null===(a=e.children)||void 0===a||!a.some(s=>this.isPosOnItem(t,this.parseRenderOpts(void 0,s,e))))}static getActionsStyleStr(t=""){const e=t+" .actions",{StyleEl:s}=mt,a=s(e,{"user-select":"none",".control-section":{position:"absolute"},button:{display:"flex","align-items":"center","justify-content":"center","&:hover":{cursor:"pointer"}},".plus-btn":{"&:after":{content:'"+"'}},".minus-btn":{"&:after":{content:'"-"'}},".zoom-btns":{bottom:"10px",left:"10px",display:"flex","flex-direction":"column"},".scrolls":{".scroll-container":{display:"flex",".scroll":{position:"relative",flex:1,display:"flex",".grab":{position:"absolute",height:"100%","&:hover":{cursor:"pointer"},"&.horizontal":{width:"100%",left:"0%"},"&.vertical":{width:"100%",top:"0%"}}},"&.horizontal":{bottom:"10px",right:"50%",transform:"translateX(50%)",width:"70%"},"&.vertical":{"flex-direction":"column",right:"10px",bottom:"50%",transform:"translateY(50%)",height:"70%",".scroll":{"flex-direction":"column"}}}},".flip-btns":{top:"10px",left:"10px",display:"flex","flex-direction":"column",".flip-btn":{"&:after":{content:'"⟳"'}},".mirror-x-btn":{"&:after":{content:'"↹"'}},".mirror-y-btn":{"&:after":{content:'"↹"',transform:"rotate(90deg)"}}}}),n=s(e,{".control-section":{"background-color":"rgba(255, 255, 255, 0.5)",border:"1px solid black",padding:"5px","border-radius":"5px"},button:{border:"1px solid black","border-radius":"3px","background-color":"rgb(116, 116, 116)",color:"white",transition:".2s","&:hover":{"background-color":"rgb(153, 151, 151)"},"&.on":{"box-shadow":"0px 0px 20px 0px rgba(254,255,30,0.75)"}},".zoom-btns":{gap:"10px",button:{width:"30px",height:"30px"}},".scrolls":{".scroll-container":{gap:"7.5px"},".grab":{"border-radius":"10px","background-color":"rgba(54, 100, 168, 0.9)","&:hover":{cursor:"pointer"}},button:{width:"15px",height:"15px"}},".flip-btns":{gap:"10px",button:{width:"25px",height:"25px"}}});return a+n}}Object(it["a"])(ht,"id",0),Object(it["a"])(ht,"imgSrcMap",{}),Object(it["a"])(ht,"getGridLines",(()=>{const t=(t={w:w,h:h,x:x,y:y},e={},s="x")=>{var a,n,i,o,r;const l={strokeStyle:"black"},c="number"===typeof e[s],d={space:(c?e[s]:null===(a=e[s])||void 0===a?void 0:a.space)||e.space,strictSpace:(c?e[s]:null===(n=e[s])||void 0===n?void 0:n.strictSpace)||e.strictSpace,align:(c?e.align:(null===(i=e[s])||void 0===i?void 0:i.align)||e.align)||"start",style:(c?e.style:(null===(o=e[s])||void 0===o?void 0:o.style)||e.style)||l,rotate:(c?e.rotate:(null===(r=e[s])||void 0===r?void 0:r.rotate)||e.rotate)||0},u=d.strictSpace||d.space,p="x"===s?"y":"x",g="x"===s?"w":"h",m="w"===g?"h":"w",f=t[g],v=t[m];let b=t[s],S=t[p],C=b+f,A=S+v,D=b,P=Math.ceil(f/u);if(d.align){const t=f%u;"center"===d.align?D+=t/2:"end"===d.align&&(D+=t)}if(d.rotate){const t=gt.getFullPosByPosAndDeg({[s]:b,[p]:S},{[s]:null,[p]:A},d.rotate),e=b-t[s];d.rotate>0&&(D+=e),P+=Math.ceil(Math.abs(e/u))}const _=[];for(let h=0;h<=P;h++){const e=D+u*h;if(e>C&&(d.rotate>0||!d.rotate))break;if(e<b&&(d.rotate<0||!d.rotate))break;let a={[s]:e,[p]:S},n={[s]:e,[p]:A};d.rotate&&(n=gt.getFullPosByPosAndDeg(a,{[s]:null,[p]:A},d.rotate),n[s]>C?n=gt.getFullPosByPosAndDeg(a,{[s]:C,[p]:null},d.rotate):n[s]<b&&(n=gt.getFullPosByPosAndDeg(a,{[s]:b,[p]:null},d.rotate)),a[s]<b?a=gt.getFullPosByPosAndDeg(n,{[s]:b,[p]:null},d.rotate):a[s]>C&&(a=gt.getFullPosByPosAndDeg(n,{[s]:C,[p]:null},d.rotate)));let i={geoShape:[a,n],style:d.style};if(t.rotate){const e={x:t.x+t.w/2,y:t.y+t.h/2};i.geoShape=i.geoShape.map(s=>gt.rotatePosition(s,t.rotate,e))}_.push(i)}return _};return(e={w:1,h:1,x:0,y:0},s={})=>{const a=[];return(s.x||s.space||s.strictSpace)&&a.push(...t(e,s,"x")),(s.y||s.space||s.strictSpace)&&a.push(...t(e,s,"y")),a}})());const pt={getElPosOnScreen(t){const e={y:0,x:0};if(!t)return e;let s=t;while("BODY"!==s.tagName)e.y+=s.offsetTop,e.x+=s.offsetLeft,s=s.offsetParent;return e},copy(t){return JSON.parse(JSON.stringify(t))}},gt={degToRadian:t=>t*(Math.PI/180),radianToDeg:t=>180*Math.atan(t)/Math.PI,slope:({x:t,y:e},{x:s,y:a},n=!0)=>n&&t===s||!n&&e===a?null:n?(e-a)/(t-s):(t-s)/(e-a),incline:(t,e,s=!0)=>{const a=t.x,n=t.y,i=e.x,o=e.y;let r=r(t,e);n===o?r=0:a===i&&(r=n>o?-1:1);let l=r,c=l?0:1*a>i?-1:1;return a!==i&&n!==o&&((n<o&&l<0||n>o&&l>0)&&(l*=-1),c=a>i?-1:1),s||(c*=-1,l*=-1,l>1&&(c/=l,l=1)),{x:c,y:l}},getPolygonSize(t=[]){const e=(t,e)=>(s,a)=>{const n=a[t];return null===s||e&&n<s||!e&&n>s?n:s},s=t.reduce(e("y",!1),null),a=t.reduce(e("x",!1),null),n=t.reduce(e("y",!0),null),i=t.reduce(e("x",!0),null);return{maxX:a,maxY:s,minX:i,minY:n,w:Math.abs(i)+Math.abs(a),h:Math.abs(n)+Math.abs(s)}},posOnYAxis(t,e){if(t.x===e.x)return 0!==t.x?null:0;const s=this.slope(t,e),a=t.y-s*t.x;return a},getIntersectPos(t,e){t.sort(sortLine),e.sort(sortLine);const s=this.posOnYAxis(...t),a=this.posOnYAxis(...e);if(s===a)return[s,a].includes(null)?null:{x:0,y:s};const n=this.slope(...t),i=this.slope(...e);if(n===i)return null;if(null===n)return{y:e[0].y,x:i*e[0].y+a};if(null===i)return{y:t[0].y,x:n*t[0].y+s};const o=(n*t[0].x+s-a)/i,r=n*o+s;return{x:o,y:r}},isIntersect(t,e){const s=t[0].x,a=t[0].y,n=t[1].x,i=t[1].y,o=e[0].x,r=e[0].y,l=e[1].x,c=e[1].y,d=(n-s)*(c-r)-(l-o)*(i-a);if(0===d)return!1;const u=((c-r)*(l-s)+(o-l)*(c-a))/d,h=((a-i)*(l-s)+(n-s)*(c-a))/d;return 0<u&&u<1&&0<h&&h<1},pythagoras(t,e){return Math.sqrt(t**2+e**2)},distBetweenPoss(t,e){const s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return this.pythagoras(s,a)},isPosOnLine(t,e){const s=this.distBetweenPoss.bind(this),[a,n]=e;return s(t,a)+s(t,n)===s(a,n)},isPosOnPoligon(t={x:0,y:0},e=[],s=0,a,n=!0,i=!1){const o=(t,e)=>t.x-e.x;s&&(e=e.map(t=>this.rotatePosition(t,s))),a&&(e=e.map(t=>({x:t.x+a.x,y:t.y+a.y})));const{maxX:r,maxY:l,minX:c,minY:d}=this.getPolygonSize(e);if(t.x<c||t.x>r||t.y<d||t.y>l)return!1;const u=[t,{x:r+1,y:t.y}].sort(o);let h=0;for(let p=0;p<e.length;p++){if(!n&&!e[p+1])break;const s=[e[p],e[p+1]||e[0]].sort(o);if(i){if(this.isPosOnLine(t,s))return!0;continue}if(JSON.stringify(s[0])===JSON.stringify(s[1]))continue;const a=this.isIntersect(u,s);a&&h++}return!i&&h%2!==0},rotatePosition(t={x:0,y:0},e=0,s={x:0,y:0}){const a=t.x-s.x,n=t.y-s.y,i=this.degToRadian(e);return{y:a*Math.sin(i)+n*Math.cos(i)+s.y,x:a*Math.cos(i)-n*Math.sin(i)+s.x}},posByPosDegAndDist(t,e,s){return{x:t.x+s*Math.cos(this.degToRadian(e)),y:t.y+s*Math.sin(this.degToRadian(e))}},isPosInEllipse(t={x:0,y:0},e={w:0,y:0,x:0,h:0,rotate:0,circleDegries:[]},s){t=this.rotatePosition(t,-e.rotate||0,e);const a=[],n=e.circleDegries,i=Math.ceil(Math.abs(n[1]-n[0])/90);for(let d=0;d<i;d++){const t=n[0]+90*d;let s=t+90;s>n[1]&&(s=n[1]);const i=Math.max(e.w,e.h)/2,o={x:e.x,y:e.y},r=this.posByPosDegAndDist(o,t,i),l=[o,r,this.posByPosDegAndDist(r,s,i),this.posByPosDegAndDist(o,s,i)];if(a.push(l),s>=n[1])break}const o=a.some(e=>this.isPosOnPoligon(t,e,void 0)),r=e.w/2,l=e.h/2,c=(t.x-e.x)**2/r**2+(t.y-e.y)**2/l**2<=1;return o&&c},rectToPolygon(t,e={x:0,y:0},s){const{w:a,h:n,x:i,y:o,isCenterPos:r}=t;let l=i-e.x,c=i+a-e.x,d=o-e.y,u=o+n-e.y;return r&&(l-=a/2,c-=a/2,d-=n/2,u-=n/2),[{x:l,y:d},{x:c,y:d},{x:c,y:u},{x:l,y:u}]},fitParentSize(t,e){const s=e.w>e.h?"w":"h",a="w"===s?"h":"w",n=e[a]/e[s],i=e.w>e.h,o=e.w/e.h<t.w/t.h;let r;return r=(t.w,t.h,o?{h:t.h,w:i?t.h/n:t.h*n}:{w:t.w,h:i?t.w*n:t.w/n}),r},getFullPosByPosAndDeg(t={x:0,y:0},e={x:0,y:0},s=360){const a=this.degToRadian(s),n=null===e.x?"x":"y";return"x"===n?e.x=-((t.y-e.y)/a-t.x):"y"===n&&(e.y=-(a*(t.x-e.x)-t.y)),e},posOnCircleByDeg(t={x:x,y:y,r:r},e=0){const s=gt.degToRadian(e);return{x:t.r*Math.cos(s)+t.x,y:t.r*Math.sin(s)+t.y}}},mt={El:(()=>{function t(t){if("<"===t[0]&&">"===t[t.length-1])return"/"===t[1]?t.split("/")[1].split(" ")[0].split(">")[0]:t.split("<")[1].split(" ")[0].split(">")[0].split("/")[0]}return(e="",s={},a=[])=>{let n="div";const i=t(e);"tr"===i?n="table":"td"===i&&(n="tr");const o=document.createElement(n);o.innerHTML=e;const r=o.firstChild;for(let t in s)r[t]=s[t];return a.forEach(t=>t&&r.appendChild(t)),r}})(),StyleEl:(()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function e(e){let s="";for(let a=0;a<e.length;a++){let n=e[a],i=n.toLowerCase();t.includes(n)?0===a?s+=i:e[a-1]&&" "!==e[a-1]&&(s+="-"+i):s+=i}return s}return function t(s="",a={},n=0){const i="\t".repeat(n);let o=`${i}${s} {`,r="";for(let l in a){const n=a[l];if(l=e(l),"object"===typeof n){const e="@"===l[0];if(e)r+=l+" {\n",r+=t(s,n,1),r+="}\n";else{let e=s;"&"===l[0]?e+=l.slice(1):e+=" "+l,r+=t(e,n)}}else o+=`\n${i}\t${l}: ${n};`}return o+=`\n${i}}\n`,o+=r,o}})()};var ft={name:"AnimatedLoader",props:{negative:Boolean},data(){return{destroyCanvas:null,animationInterval:null}},mounted(){this.init()},destroyed(){var t;null===(t=this.destroyCanvas)||void 0===t||t.call(this),clearInterval(this.animationInterval)},methods:{init(){const t=!1,e=!0,s=!0,a=!0,n=!1,i=!1,o=!1,r=12,l=.3,{negative:c}=this,d=e&&B(2,15)||r||12,u=t=>{const e=1/t,s=[];for(let a=0;a<t;a++)s.push(e*a);return s},h={x:50,y:50,r:46.5},p=u(d).map((t,e)=>({id:j(),deg:n?270:360*t,r:i?h.r*(o?t:1-t):h.r,speed:(e+1)*l,color:$()})),g={width:100,height:100,shapes:[...p],staticShapes:[{hide:!0,x:50,y:50,w:15,h:15,isCenterPos:!0,text:d,style:{fillStyle:"white",textAlign:"center",textBaseline:"middle"}},{...h,w:2*h.r,h:2*h.r,isCenterPos:!0,circleDegries:360,style:{sstrokeStyle:"#ac1b1b",fillStyle:c?"#FFFFFF20":"#00000020"}}]},m=new ht(g,{selector:".animated-loader-container",enableAnimation:!0},(e,n,i,o)=>{const r=p.findIndex(t=>t.id===e.id),l=0===r?p[p.length-1]:p[r-1],d=gt.posOnCircleByDeg({...h,r:e.r},e.deg),u=gt.posOnCircleByDeg({...h,r:l.r},l.deg),g=[{...d,circleDegries:360,w:6,h:6,isCenterPos:!0,style:{fillStyle:"#264e8c",sstrokeStyle:"black"}}];return a||!r&&!t||g.push({...d,zIndex:-1,geoShape:[{x:0,y:0},{x:u.x-d.x,y:u.y-d.y}],style:{strokeStyle:s&&e.color||(c?"white":"black")||"#0f165c",lineCap:"round",lineWidth:.5}}),a&&g.push(...p.filter((s,a)=>a>r&&s.id!==e.id&&(!t&&r!==p.length-1||a)&&(t||r||s.id!==l.id)).map(t=>({...d,zIndex:-1,geoShape:[{x:0,y:0},{x:gt.posOnCircleByDeg({...h,r:t.r},t.deg).x-d.x,y:gt.posOnCircleByDeg({...h,r:t.r},t.deg).y-d.y}],style:{strokeStyle:s&&e.color||(c?"white":"black")||"#0f165c",lineCap:"round",lineWidth:.5}}))),g});this.destroyCanvas=()=>m.removeWindowEventListeners(),this.animationInterval=setInterval(()=>{p.forEach(t=>{t.deg+=t.speed;const e=gt.posOnCircleByDeg({...h,r:t.r},t.deg);t.x=e.x,t.y=e.y}),m.updateCells(p)},50)}}},yt=ft,vt=(s("d12d"),Object(g["a"])(yt,dt,ut,!1,null,"40d779b4",null)),xt=vt.exports,bt={name:"Loader",components:{AnimationLoader:xt}},St=bt,wt=(s("e874"),Object(g["a"])(St,lt,ct,!1,null,"043614d9",null)),Ct=wt.exports,At={name:"App",components:{AppHeader:C,AppFooter:L,AppAside:R,Loader:Ct},data(){return{isLoading:!1,isDarkMode:"true"===localStorage.isDarkMode}},computed:{settings(){return this.$store.getters["settings/settings"]},isRtl(){const t=this.$i18n.locale;return["he"].includes(t)},loggedUser(){return this.$store.getters["auth/loggedUser"]}},async created(){this.isLoading=!0;try{await Promise.all([this.$store.dispatch("settings/loadSettings"),this.$store.dispatch("auth/getUserInfo")])}catch(t){}this.isLoading=!1,rt.on("set_darkmode",t=>{this.isDarkMode=t}),["HomePage"].includes(this.$route.name)&&(this.loggedUser?this.$router.push({name:"EdMapPage"}):this.$router.push({name:"LoginPage"}))}},Dt=At,Pt=Object(g["a"])(Dt,n,i,!1,null,null,null),_t=Pt.exports,Ot=s("9483");Object(Ot["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var Lt=s("8c4f"),zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-page container flex-center height-all"},[e("CreditLogo")],1)},Mt=[],Et={components:{CreditLogo:f},name:"Home"},kt=Et,It=Object(g["a"])(kt,zt,Mt,!1,null,null,null),Rt=It.exports,Tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about-page container flex-center height-all"},[t._v(" ABOUT PAGE | "),e("Tooltip",{attrs:{msg:"This is a tooltip in the about page, telling you something about it."}})],1)},jt=[],Bt=function(){var t=this,e=t._self._c;return e("span",{staticClass:"tooltip"},[e("span",{ref:"elPreview",staticClass:"tooltip-preview",on:{click:t.toggleShow,mouseleave:function(e){return t.toggleHoverShow(!1)},mouseover:function(e){return t.handleHover(e)}}},[t.$slots.preview?t._t("preview"):e("span",[t._v("(?)")])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show||t.hoverShow,expression:"show || hoverShow"}],ref:"elMsg",staticClass:"tooltip-msg"},[t.$slots.content?t._t("content"):e("p",[t._v(t._s(t.msg?t.$t(t.msg):"No tooltip message..."))])],2)])},$t=[],Ft={name:"Tooltip",props:{msg:{type:String,required:!1,default:""},attachToElement:{type:String,required:!1,default:"body"}},data(){return{show:!1,hoverShow:!1}},methods:{toggleShow(t){this.show="boolean"===typeof t?t:!this.show,this.show?this.viewMsg():this.hoverShow=!1},toggleHoverShow(t){this.hoverShow="boolean"===typeof t?t:!this.hoverShow,this.show&&this.viewMsg()},handleHover(t){this.hoverShow=!0,this.viewMsg(t)},viewMsg(t){const{elPreview:e,elMsg:s}=this.$refs,{offsetWidth:a,offsetHeight:n}=e,{offsetWidth:i,offsetHeight:o}=s,{offsetWidth:r,offsetHeight:l}=document.querySelector(this.attachToElement),c=N(e),{clientX:d,clientY:u}=t||{clientX:c.x,clientY:c.y},h={};h.left=h.right=h.bottom=h.top=h.width=h.transform="";let p,g,m=270;h.left=0,r-d<m?(h.left-=m,p=c.x-m):p=c.x+m,p<0?h.left-=p:h.left+=p>r?p:a/2,h.left+="px",h.top=0,l-u<o?(h.top-=n,g=c.y-n):g=c.y+n,g<0?h.top-=g:h.top+=g>l?g:n/2,h.top+="px";const f=window.innerWidth;1.5*m>f?(h.width="95vw",h.left=f/2-c.x+"px",h.transform="translateX(-50%)"):h.width=m+"px";for(let y in h)s.style[y]=h[y]}}},Nt=Ft,Ut=(s("b3ff"),Object(g["a"])(Nt,Bt,$t,!1,null,"671a0e06",null)),qt=Ut.exports,Yt={name:"About",components:{Tooltip:qt}},Ht=Yt,Wt=Object(g["a"])(Ht,Tt,jt,!1,null,null,null),Xt=Wt.exports,Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sand-box-page container flex column align-center justify-center gap20 height-all"},[e("div",[t._v(" SAND BOX ")]),e("div",{staticClass:"flex align-center space-around gap20 stars-container width-alll"},[e("AnimationLoader",{staticClass:"loader",attrs:{negative:!0}})],1)])},Vt=[],Gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sun-sistem-container"})},Zt=[],Kt={name:"SunSistem",data(){return{destroyCanvas:null,animationInterval:null}},mounted(){this.init()},destroyed(){var t;null===(t=this.destroyCanvas)||void 0===t||t.call(this),clearInterval(this.animationInterval)},methods:{init(){const t=!1,e=!1,s=.6,a=3550,n=0,i=(t,e,i=1,o=10,r,l)=>{const c={r:e,x:a/2,y:a/2},d=270+i*n;return{name:t,circle:c,speed:i*s,width:o,deg:d,attachedTo:l,id:j(),...gt.posOnCircleByDeg(c),color:r||$()}},o=[i("earth",650,1,100,"blue"),i("moon",150,3,50,"white","earth"),i("marse",350,3,150,"red"),i("jupiter",950,2,150,"green"),i("jupiter",1200,.5,200,"grey"),i("venus",1645,.2,260,"brown")],r={name:"sun",circle:{r:0,x:a/2,y:a/2},x:a/2,y:a/2,circleDegries:360,w:300,h:300,isCenterPos:!0,style:{fillStyle:"yellow"}},l={width:a,height:a,shapes:o,staticShapes:[r]},c=new ht(l,{selector:".sun-sistem-container",enableAnimation:!0},(s,a,n,i)=>{const l=s.attachedTo?o.find(t=>t.name===s.attachedTo):r,c={x:s.x,y:s.y},d=[{...c,circleDegries:360,w:s.width,h:s.width,isCenterPos:!0,style:{fillStyle:s.color}}];return t&&d.push({x:l.x,y:l.y,zIndex:-1,w:2*s.circle.r,h:2*s.circle.r,isCenterPos:!0,circleDegries:360,style:{strokeStyle:"black"}}),e&&d.push({...c,zIndex:-1,geoShape:[{x:0,y:0},{x:l.x-c.x,y:l.y-c.y}],style:{strokeStyle:"black",lineCap:"round"}}),d});this.destroyCanvas=()=>c.removeWindowEventListeners(),this.animationInterval=setInterval(()=>{o.forEach(t=>{const e=t.attachedTo?o.find(e=>e.name===t.attachedTo):r,s=e.circle?gt.posOnCircleByDeg(e.circle,e.deg):{x:e.x,y:e.y};t.deg+=t.speed;const a=gt.posOnCircleByDeg({...s,r:t.circle.r},t.deg);t.x=a.x,t.y=a.y}),c.updateCells(o)},50)}}},Qt=Kt,te=(s("ef60"),Object(g["a"])(Qt,Gt,Zt,!1,null,"8508d2e0",null)),ee=te.exports,se={name:"SandBox",components:{AnimationLoader:xt,SunSistem:ee}},ae=se,ne=(s("d0f4"),Object(g["a"])(ae,Jt,Vt,!1,null,"45c8e6f7",null)),ie=ne.exports;const oe=[{path:"/",component:Rt,name:"HomePage"},{path:"/about",component:Xt,name:"AboutPage"},{path:"/sand-box",component:ie,name:"SandBox"}];var re=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth-app container inner-app"},[e("router-view",{staticClass:"inner-app-content"}),t.isLoading?e("Loader"):t._e()],1)},le=[],ce={name:"AuthApp",computed:{isLoading(){return this.$store.getters["auth/isLoading"]}},components:{Loader:Ct}},de=ce,ue=Object(g["a"])(de,re,le,!1,null,null,null),he=ue.exports,pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("router-link",{attrs:{to:{name:"SignupPage"}}},[e("button",[t._v(t._s(t.$t("signup")))])]),e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("FormInput",{attrs:{type:"text",placeholder:"username",label:"username"},model:{value:t.userCred.username,callback:function(e){t.$set(t.userCred,"username",e)},expression:"userCred.username"}}),e("FormInput",{attrs:{type:"password",placeholder:"password",label:"password"},model:{value:t.userCred.password,callback:function(e){t.$set(t.userCred,"password",e)},expression:"userCred.password"}}),e("button",{attrs:{disabled:!t.isUserValid}},[t._v(t._s(t.$t("submit")))])],1)],1)},ge=[],me=function(){var t=this,e=t._self._c;return e("section",{staticClass:"form-input",class:{"show-error":t.showError,["form-input-"+t.type]:!0}},[t.label?e("label",{staticClass:"label",attrs:{for:t.inputId}},[e("p",[t._v(t._s(t.$t(t.label)))]),t.required?e("span",{staticClass:"require-span",style:{opacity:t.isEmpty?1:0}},[t._v("*")]):t._e()]):t._e(),e("div",{ref:"elInputContainer",staticClass:"input",class:{[t.type]:!0,empty:t.isEmpty,[t.iconPos&&"icon-"+t.iconPos||""]:!0}},["checkbox"===t.type&&"input"===t.componentType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"elInput",attrs:{disabled:t.disabled,id:t.inputId,required:t.required,min:t.min,max:t.max,placeholder:t.$t(t.placeholder),step:t.step,type:"checkbox"},domProps:{checked:Array.isArray(t.val)?t._i(t.val,null)>-1:t.val},on:{change:function(e){var s=t.val,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=null,o=t._i(s,i);a.checked?o<0&&(t.val=s.concat([i])):o>-1&&(t.val=s.slice(0,o).concat(s.slice(o+1)))}else t.val=n}}}):"radio"===t.type&&"input"===t.componentType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"elInput",attrs:{disabled:t.disabled,id:t.inputId,required:t.required,min:t.min,max:t.max,placeholder:t.$t(t.placeholder),step:t.step,type:"radio"},domProps:{checked:t._q(t.val,null)},on:{change:function(e){t.val=null}}}):"input"===t.componentType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"elInput",attrs:{disabled:t.disabled,id:t.inputId,required:t.required,min:t.min,max:t.max,placeholder:t.$t(t.placeholder),step:t.step,type:t.type},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}}):"textarea"===t.componentType?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"elInput",attrs:{disabled:t.disabled,id:t.inputId,required:t.required,placeholder:t.$t(t.placeholder)},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}}):"select"===t.componentType?e("select",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"elInput",attrs:{disabled:t.disabled,id:t.inputId,required:t.required,placeholder:t.$t(t.placeholder)},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.val=e.target.multiple?s:s[0]},function(e){return t.$emit("change",t.val)}]}},t._l(t.itemsToRender,(function(s){return e("option",{key:s.label,attrs:{label:t.$t(s.label)},domProps:{value:s.value,selected:t.val.value===s.value}})})),0):"multiselect"===t.componentType?e("div",{ref:"elInput",class:{open:t.isOpen},attrs:{tabindex:"0",id:t.inputId},on:{click:function(e){t.isOpen=!t.isOpen},blur:t.closeDropDown}},[e("div",{staticClass:"head",staticStyle:{height:"100%",display:"flex","align-items":"center"}},[e("span",{staticClass:"placeholder"},[t._v(t._s(t.$t(t.placeholder)))]),e("div",{staticClass:"toggle-btn"}),e("div",{staticClass:"inner-square"})]),e("div",{staticClass:"drop-down",on:{click:function(t){t.stopPropagation()}}},t._l(t.itemsToRender,(function(s){return e("label",{key:s.label},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.val[s.value],expression:"val[item.value]"}],attrs:{type:"checkbox",id:"formCheckbox",disabled:t.disabled},domProps:{value:t.val[s.value],checked:Array.isArray(t.val[s.value])?t._i(t.val[s.value],t.val[s.value])>-1:t.val[s.value]},on:{change:function(e){var a=t.val[s.value],n=e.target,i=!!n.checked;if(Array.isArray(a)){var o=t.val[s.value],r=t._i(a,o);n.checked?r<0&&t.$set(t.val,s.value,a.concat([o])):r>-1&&t.$set(t.val,s.value,a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.val,s.value,i)}}}),e("span",[t._v(t._s(t.$t(s.label)))])])})),0)]):t._e(),[t.$slots.default||t.showError?e("div",{staticClass:"icon-img",on:{click:function(e){t.$refs.elInput.$el.querySelector("input").focus()}}}):t._e()]],2)])},fe=[];function ye(t=8){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}const ve=["text","number","textarea","password","checkbox","color","date"];var xe={name:"FormInput",props:{label:{required:!1,default:"",type:String},placeholder:{required:!1,type:String,default:""},type:{required:!1,type:String,default:"text"},items:{required:!1,type:Array,default:()=>[]},itemsMap:{required:!1,type:Object,default:()=>{}},id:{required:!1,type:String,default:""},disabled:{required:!1,type:Boolean,default:!1},required:{required:!1,type:Boolean,default:!1},value:{required:!0,type:null},iconPos:{type:String,required:!1,default:""},showError:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:-1/0},max:{type:Number,required:!1,default:1/0},step:{required:!1,type:Number,default:0}},data(){return{val:this.value,inputId:this.id||ye(),isOpen:!1}},created(){"select"===this.componentType&&(this.val=this.val.value||this.val)},computed:{componentType(){const{type:t}=this;return"multiselect"===t?"multiselect":"search"===t?"search":"textarea"===t?"textarea":ve.includes(t)?"input":t},itemsToRender(){if(this.itemsMap){const t=[];for(let e in this.itemsMap)t.push({label:this.itemsMap[e],value:e});return t}return this.items.map(t=>"object"!==typeof t?{value:t,label:t}:t)},isEmpty(){return"number"===this.type&&(this.val<this.min||this.val>this.max)||!this.val&&0!==this.val}},methods:{closeDropDown(t){t.relatedTarget&&"formCheckbox"===t.relatedTarget.id?t.target.focus():this.isOpen=!1}},watch:{val:{deep:!0,handler(t){if("number"===this.type){const{min:e,max:s}=this;"number"===typeof e&&t<e&&(this.val=e),"number"===typeof s&&t>s&&(this.val=s),t=+t}this.$emit("input",t),this.$emit("change",t)}},value(t,e){t!==e&&(this.val=t)}}},be=xe,Se=(s("0ecf"),Object(g["a"])(be,me,fe,!1,null,null,null)),we=Se.exports,Ce={name:"LoginPage",data(){return{userCred:JSON.parse(localStorage.userCred||"null")||{username:"",password:""}}},computed:{isUserValid(){return this.userCred.username&&this.userCred.password}},methods:{async login(){this.isUserValid&&(localStorage.userCred=JSON.stringify(this.userCred),await this.$store.dispatch({type:"auth/login",cred:this.userCred}),this.$router.push({name:"EdMapPage"}))}},components:{FormInput:we}},Ae=Ce,De=Object(g["a"])(Ae,pe,ge,!1,null,null,null),Pe=De.exports,_e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"signup-page"},[e("router-link",{attrs:{to:{name:"LoginPage"}}},[e("button",[t._v(t._s(t.$t("login")))])]),e("form",{on:{submit:function(e){return e.preventDefault(),t.signup.apply(null,arguments)}}},[e("FormInput",{attrs:{type:"text",placeholder:"username",label:"username"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),e("FormInput",{attrs:{type:"text",placeholder:"firstname",label:"firstname"},model:{value:t.user.firstname,callback:function(e){t.$set(t.user,"firstname",e)},expression:"user.firstname"}}),e("FormInput",{attrs:{type:"text",placeholder:"lastname",label:"lastname"},model:{value:t.user.lastname,callback:function(e){t.$set(t.user,"lastname",e)},expression:"user.lastname"}}),e("FormInput",{attrs:{type:"text",placeholder:"email",label:"email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),e("FormInput",{attrs:{type:"password",placeholder:"password",label:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),e("button",{attrs:{disabled:!t.isUserValid}},[t._v(t._s(t.$t("submit")))])],1)],1)},Oe=[];const Le="account",ze={query:Me,get:Ee,add:ke,update:Ie,save:Re,getEmptyAccount:Te};function Me(t){return J.get(Le,t)}function Ee(t){return J.get(`${Le}/${t}`)}function ke(t){return J.post(Le,t)}function Ie(t){return J.put(Le,t)}function Re(t){return t._id?Ie(t):ke(t)}function Te(){return{username:"",password:"",firstname:"",lastname:"",email:"",roles:["user"],organizations:[]}}var je={name:"SignupPage",data(){return{user:ze.getEmptyAccount()}},computed:{isUserValid(){const{user:t}=this;return t.username&&t.password&&t.firstname&&t.lastname&&t.email}},methods:{async signup(){this.isUserValid&&(await this.$store.dispatch({type:"auth/signup",cred:this.user}),this.$router.push("/"))}},components:{FormInput:we}},Be=je,$e=Object(g["a"])(Be,_e,Oe,!1,null,null,null),Fe=$e.exports;const Ne=[{name:"AuthApp",path:"/example",component:he,children:[{name:"LoginPage",path:"/login",component:Pe},{name:"SignupPage",path:"/signup",component:Fe}]}];var Ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"account-app container inner-app"},[e("router-view",{staticClass:"inner-app-content"}),t.isLoading?e("Loader"):t._e()],1)},qe=[],Ye={name:"AccountApp",computed:{isLoading(){return this.$store.getters["account/isLoading"]}},components:{Loader:Ct}},He=Ye,We=Object(g["a"])(He,Ue,qe,!1,null,null,null),Xe=We.exports,Je=function(){var t=this,e=t._self._c;return e("section",{staticClass:"account-page height-all width-all flex column"},[e("h2",[t._v(t._s(t.$t("accounts")))]),e("ItemSearchList",{attrs:{itemsData:t.accountData,initFilterBy:t.filterBy,itemDetailesPageName:"AccountDetails",newItemPageName:"AccountEdit",singlePreviewCmp:t.$options.AccountPreview},on:{filter:t.setFilter}})],1)},Ve=[],Ge=function(){var t=this,e=t._self._c;return e("li",{staticClass:"account-preview item-preview"},[e("router-link",{attrs:{to:"/account/"+t.item._id}},[e("pre",[t._v(t._s(t.item))])])],1)},Ze=[],Ke={name:"AccountPreview",props:{item:{type:Object,required:!0}}},Qe=Ke,ts=Object(g["a"])(Qe,Ge,Ze,!1,null,null,null),es=ts.exports,ss=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination-btns"},[e("div",{staticClass:"page-buttons",class:{disable:t.page<=1}},[e("button",{on:{click:function(e){return t.routeToNewPage(+t.page-1)}}},[t._v(" < ")])]),e("div",{staticClass:"page-num-btns"},[t.isLotsOfPages&&!t.pagesToRender.includes(1)?[e("button",{on:{click:function(e){return t.routeToNewPage(1)}}},[t._v("1")]),t.page>3?e("span",{staticClass:"dots"},[t._v("...")]):t._e()]:t._e(),t._l(t.pagesToRender,(function(s){return e("button",{key:s,class:{selected:t.page==s},on:{click:function(e){return t.routeToNewPage(s)}}},[t._v(" "+t._s(s)+" ")])})),t.isLotsOfPages&&!t.pagesToRender.includes(t.totalPages)?[t.page<t.totalPages-2?e("span",{staticClass:"dots"},[t._v("...")]):t._e(),e("button",{on:{click:function(e){return t.routeToNewPage(t.totalPages)}}},[t._v(t._s(t.totalPages))])]:t._e()],2),e("div",{staticClass:"page-buttons",class:{disable:t.totalPages<=t.page}},[e("button",{on:{click:function(e){return t.routeToNewPage(+t.page+1)}}},[t._v(" > ")])])])},as=[],ns={props:{perPage:[Number],total:[Number],value:[Number]},data(){return{renderPagesLimit:7}},computed:{page(){return this.value+1},totalPages(){return Math.ceil(this.total/this.perPage)},isLotsOfPages(){return this.totalPages>this.renderPagesLimit},pagesToRender(){const{totalPages:t,page:e,isLotsOfPages:s,renderPagesLimit:a}=this,n="0".repeat(t).split("").map((t,e)=>e+1);if(!s)return n;const i=Math.floor(a/2);let o=e-i;o<0?o=0:o>=t-(a-1)&&(o=t-(a-1));const r=o+Math.floor(e>i&&e<=t-1-i?1.5*i:2*i);return n.slice(o,r)}},methods:{routeToNewPage(t){t-=1,t<0||t>=this.totalPages||this.$emit("input",t)}}},is=ns,os=(s("0fd2"),Object(g["a"])(is,ss,as,!1,null,"a40cdea8",null)),rs=os.exports,ls=function(){var t,e=this,s=e._self._c;return s("div",{staticClass:"item-page flex gap20 column flex-1"},[s("div",{staticClass:"width-all flex align-center space-between"},[s("ItemFilter",{attrs:{initFilter:e.filterBy.filter},on:{filtered:e.setFilter}}),e.newItemPageName?s("router-link",{attrs:{to:{name:e.newItemPageName}}},[s("button",[e._v(e._s(e.$t("addNew")))])]):e._e()],1),null!==(t=e.items)&&void 0!==t&&t.length?[e.items?s("ItemList",{attrs:{items:e.items,singlePreviewCmp:e.singlePreviewCmp,itemDetailesPageName:e.itemDetailesPageName}}):e._e(),e.filterBy?s("PaginationBtns",{attrs:{total:e.totalItems,perPage:e.filterBy.pagination.limit},model:{value:e.filterBy.pagination.page,callback:function(t){e.$set(e.filterBy.pagination,"page",t)},expression:"filterBy.pagination.page"}}):e._e()]:e.isLoading?e._e():s("h3",[e._v(e._s(e.$t("noItemsFound")))]),e.isLoading?s("Loader"):e._e()],2)},cs=[],ds=function(){var t=this,e=t._self._c;return e("form",{staticClass:"item-filter",on:{submit:function(e){return e.preventDefault(),t.emitFilter.apply(null,arguments)}}},[e("FormInput",{attrs:{placeholder:"search"},model:{value:t.filterBy.search,callback:function(e){t.$set(t.filterBy,"search",e)},expression:"filterBy.search"}})],1)},us=[],hs={name:"ItemFilter",props:{initFilter:{type:Object,required:!0}},methods:{emitFilter(){this.$emit("filtered",this.filterBy)}},data(){return{filterBy:null}},created(){this.filterBy={...this.initFilter}},components:{FormInput:we}},ps=hs,gs=Object(g["a"])(ps,ds,us,!1,null,null,null),ms=gs.exports,fs=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"item-list flex align-start space-around wrap gap20"},t._l(t.items,(function(s){return e(t.componentToRender,{key:s._id,tag:"component",attrs:{item:s,itemDetailesPageName:t.itemDetailesPageName}})})),1)},ys=[],vs=function(){var t=this,e=t._self._c;return e("li",{staticClass:"item-preview"},[e("router-link",{attrs:{to:{name:t.itemDetailesPageName,params:{id:t.item._id}}}},[e("pre",[t._v(t._s(t.item))])])],1)},xs=[],bs={name:"ItemPreview",props:{item:{type:Object,required:!0},itemDetailesPageName:[String]}},Ss=bs,ws=Object(g["a"])(Ss,vs,xs,!1,null,null,null),Cs=ws.exports,As={name:"ItemList",props:{items:{type:Array,required:!0},singlePreviewCmp:[Object],itemDetailesPageName:[String]},computed:{componentToRender(){return this.singlePreviewCmp||"ItemPreview"}},components:{ItemPreview:Cs}},Ds=As,Ps=Object(g["a"])(Ds,fs,ys,!1,null,null,null),_s=Ps.exports,Os={name:"ItemSearchList",props:{initFilterBy:{type:Object,default:()=>{}},itemsData:[Object],itemDetailesPageName:[String],newItemPageName:[String],singlePreviewCmp:[Object],isLoading:[Boolean]},data(){return{filterBy:null}},watch:{filterBy:{deep:!0,handler(t){const e={};U(t,(t,s)=>{this.$route.query[t]!=s&&(e[t]=s)},"_"),Object.keys(e).length&&this.$router.push({query:{...this.$route.query,...e}}),this.$emit("filter",this.filterBy)}}},methods:{setFilter(t){this.filterBy.filter=JSON.parse(JSON.stringify(t))}},computed:{items(){return this.itemsData.items},totalItems(){return this.itemsData.total}},created(){const t=JSON.parse(JSON.stringify(this.initFilterBy)),e=this.$route.query;U(t,(s,a)=>{let n=+e[s];isNaN(n)&&(n=e[s]),e[s]&&F(t,s,n,"_")},"_"),this.filterBy=t},components:{ItemFilter:ms,ItemList:_s,PaginationBtns:rs,Loader:Ct}},Ls=Os,zs=(s("e85b"),Object(g["a"])(Ls,ls,cs,!1,null,null,null)),Ms=zs.exports,Es={name:"AccountPage",data(){return{filterBy:null}},watch:{filterBy:{deep:!0,handler(t){this.getAccounts()}}},methods:{getAccounts(){this.$store.dispatch({type:"account/loadAccounts",filterBy:this.filterBy})},setFilter(t){this.filterBy=JSON.parse(JSON.stringify(t))}},computed:{accountData(){return this.$store.getters["account/data"]}},created(){this.setFilter(this.$store.getters["account/filterBy"])},components:{AccountPreview:es,PaginationBtns:rs,ItemSearchList:Ms,Loader:Ct}},ks=Es,Is=Object(g["a"])(ks,Je,Ve,!1,null,null,null),Rs=Is.exports,Ts=function(){var t=this,e=t._self._c;return e("div",{staticClass:"account-details"},[t.account?e("pre",[t._v(t._s(t.account))]):t._e(),t.account?e("router-link",{attrs:{to:{name:"AccountEdit",params:{id:t.account._id}}}},[e("button",[t._v(t._s(t.$t("edit")))])]):t._e()],1)},js=[],Bs={name:"AccountDetails",methods:{getAccount(){this.$store.dispatch({type:"account/loadAccount",id:this.$route.params.id})}},computed:{account(){return this.$store.getters["account/selectedAccount"]}},created(){this.getAccount()},watch:{"$route.params.id"(){this.getAccount()}}},$s=Bs,Fs=Object(g["a"])($s,Ts,js,!1,null,null,null),Ns=Fs.exports,Us=function(){var t=this,e=t._self._c;return e("div",{staticClass:"account-edit"},[t.AccountToEdit?e("form",{on:{submit:function(e){return e.preventDefault(),t.saveAccount.apply(null,arguments)}}},[e("pre",[t._v(t._s(t.AccountToEdit))]),e("FormInput",{attrs:{type:"text",placeholder:"username"},model:{value:t.AccountToEdit.username,callback:function(e){t.$set(t.AccountToEdit,"username",e)},expression:"AccountToEdit.username"}}),e("FormInput",{attrs:{type:"text",placeholder:"email"},model:{value:t.AccountToEdit.email,callback:function(e){t.$set(t.AccountToEdit,"email",e)},expression:"AccountToEdit.email"}}),e("FormInput",{attrs:{type:"text",placeholder:"role"},model:{value:t.AccountToEdit.roles[0],callback:function(e){t.$set(t.AccountToEdit.roles,0,e)},expression:"AccountToEdit.roles[0]"}}),e("button",{attrs:{disabled:!t.isAccountValid}},[t._v(t._s(t.$t("submit")))])],1):t._e()])},qs=[],Ys={name:"AccountEdit",data(){return{AccountToEdit:null}},computed:{isAccountValid(){return this.AccountToEdit&&this.AccountToEdit.key}},methods:{async getAccount(){this.AccountToEdit=await this.$store.dispatch({type:"account/loadAccount",id:this.$route.params.id})},async saveAccount(){this.isAccountValid&&await this.$store.dispatch({type:"account/saveAccount",item:this.AccountToEdit})}},created(){this.getAccount()},watch:{"$route.params.id"(){this.getAccount()}},components:{FormInput:we}},Hs=Ys,Ws=Object(g["a"])(Hs,Us,qs,!1,null,null,null),Xs=Ws.exports;const Js=[{name:"AccountApp",path:"/account",component:Xe,children:[{name:"AccountPage",path:"/",component:Rs},{name:"AccountEdit",path:"edit/:id?",component:Xs},{name:"AccountDetails",path:":id",component:Ns}]}];var Vs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-app container inner-app"},[e("router-view",{staticClass:"inner-app-content"}),t.isLoading?e("Loader"):t._e()],1)},Gs=[],Zs={name:"SettingsApp",computed:{isLoading(){return this.$store.getters["settings/isLoading"]}},components:{Loader:Ct}},Ks=Zs,Qs=Object(g["a"])(Ks,Vs,Gs,!1,null,null,null),ta=Qs.exports,ea=function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-page flex column gap10"},[e("FormInput",{attrs:{placeholder:"locale",value:t.currLocale,type:"select",items:t.langs},on:{change:t.setLocale}}),e("FormInput",{attrs:{label:t.$t("darkMode"),value:t.isDarkMode,type:"checkbox"},on:{input:t.setDarkMode}})],1)},sa=[];const aa=[{value:"en",label:"english"},{value:"he",label:"hebrew"}];var na={name:"SettingsPage",data(){return{langs:aa,currLocale:aa.find(t=>t.value===this.$i18n.locale),locale:this.$i18n.locale,isDarkMode:"true"===localStorage.isDarkMode||!1,settings:null}},methods:{setLocale(t){this.$i18n.locale=localStorage.locale=t},setDarkMode(t){this.isDarkMode=t,localStorage.isDarkMode=t,rt.emit("set_darkmode",t)},async saveSettings(){const t=await this.$store.dispatch({type:"settings/updateSettings",settings:this.settings});this.settings=JSON.parse(JSON.stringify(t))}},created(){this.settings=JSON.parse(JSON.stringify(this.$store.getters["settings/settings"]))},components:{FormInput:we}},ia=na,oa=Object(g["a"])(ia,ea,sa,!1,null,null,null),ra=oa.exports;const la=[{name:"SettingsApp",path:"/settings",component:ta,children:[{name:"SettingsPage",path:"/",component:ra}]}];var ca=function(){var t=this,e=t._self._c;return e("router-view")},da=[],ua={},ha=Object(g["a"])(ua,ca,da,!1,null,null,null),pa=ha.exports,ga=function(){var t=this;t._self._c;return t._m(0)},ma=[function(){var t=this,e=t._self._c;return e("section",{staticClass:"dashboard-page flex column align-center space-around"},[e("h2",[t._v("Dashboard")]),e("div",{staticClass:"charts-container flex wrap align-center space-around"},[e("div",{staticClass:"chart bar2-container"}),e("div",{staticClass:"chart frame-container"}),e("div",{staticClass:"chart line-container"}),e("div",{staticClass:"chart bar3-container"}),e("div",{staticClass:"chart donat-container"}),e("div",{staticClass:"chart bar-container"}),e("div",{staticClass:"chart disc-container"}),e("div",{staticClass:"chart pi-container"})])])}];class fa{constructor(t=null,e="body"){Object(it["a"])(this,"canvasService",null),Object(it["a"])(this,"selector",""),Object(it["a"])(this,"renderedData",[]),this.chartData=t,this.selector=e}init(){this.initService()}destroy(){this.canvasService.removeWindowEventListeners()}getCahrtDataToRender(){return[]}get size(){return{w:this.chartData.width||1600,h:this.chartData.height||900}}initService(){const t=!!this.getAnimationFrames,e=t?this.getAnimationFrames():this.getCahrtDataToRender();if(t){const t=()=>{const s=e.shift();this.renderedData=s,this.setCanvasService(s),e.length&&requestAnimationFrame(t)};requestAnimationFrame(t)}else this.renderedData=e,this.setCanvasService(this.renderedData)}setCanvasService(t){const e={width:this.size.w||1600,height:this.size.h||900,staticShapes:t};this.canvasService?this.canvasService.updateBoard(e):this.canvasService=new ht(e,{selector:this.selector,enableZoom:!1},null,{mousemove:this.onMouseHover.bind(this),click:this.onClick})}updateData(t){this.chartData=t,this.initService()}onClick(t,e){console.log(e)}findRenderedItemPosMatch(t,e=!1){return this.renderedData.find(s=>s.hoveredData&&ht.isPosOnItem(t,s,e))}onMouseHover(t,e){const s=this.findRenderedItemPosMatch(e),a=this.canvasService.elCanvas;if(!s)return void(a.style.cursor="default");a.style.cursor="pointer";const n=s.hoveredData;let i=n.item.tag;n.label&&(i+="\n"+n.label),n.val&&(i+="\n"+n.val),console.log(i)}}const ya={data:[],width:1600,height:900,labels:[],horizontal:!1,labelsNegative:!1,dataNegative:!1,info:{disable:!1,position:"right",align:"middle",size:30},legend:{tag:"This is a legend",position:"top",align:"center"}};class va extends fa{constructor(t=ya,...e){super(Pa.fillData(t,ya,["legend"]),...e),this.strictItemSize=!1,this.init()}static defClrByIdx(t){return this.defaultColors[t]||this.defaultColors[0]}static getClrFromStyle(t,e){return(null===t||void 0===t?void 0:t.color)||this.defClrByIdx(e)}get textStyle(){return{fillStyle:"black",font:"sans-serif",size:40}}get chartDataUtils(){const{size:t,chartData:e,strictItemSize:s}=this,{horizontal:a,labelsNegative:n,dataNegative:i}=e,o=a?"y":"x",r="x"===o?"y":"x",{main:l,sec:c}=this.constructor.sizeKeyByAlignOrAxis(o),d=this.totalPad,u={w:t.w-d.right-d.left,h:t.h-d.top-d.bottom},h={x:d.left,y:d.top},p={x:h.x+u.w,y:h.y+u.h},{min:g,max:m}=e.data.reduce((t,e)=>({min:Math.min(t.min,...e.vals),max:Math.max(t.max,...e.vals)}),{min:s?0:1/0,max:-1/0}),f=m-g,y=t=>i?p.y-u.h*((m-t)/f):h.y+u.h*((m-t)/f),v=t=>i?h.x+u.w*((m-t)/f):p.x-u.w*((m-t)/f),x=t=>"y"===r?y(t):v(t),b=t=>"x"===r?v(t):y(t),S={[o]:u[l]/(e.labels.length-(s?0:1)),[r]:u[c]/(e.labels.length-(s?0:1))},w=s&&!a&&n||!n&&s&&a?1:0,C=t=>n?p.x-S.x*(t+w):h.x+S.x*(t+w),A=t=>n?h.y+S.y*(t+w):p.y-S.y*(t+w),D=t=>"x"===o?C(t):A(t),P=t=>"y"===secByAxis?A(t):C(t);return{pad:d,start:h,end:p,minVal:g,maxVal:m,mainAxis:o,secAxis:r,xByVal:v,yByVal:y,mainByVal:b,secByVal:x,xByIdx:C,yByIdx:A,secByIdx:P,mainByIdx:D,axisValGap:S,dataAreaSize:u,mainSizeKey:l,secSizeKey:c}}static sizeKeyByAlignOrAxis(t){switch(t){case"y":case"top":case"bottom":return{main:"h",sec:"w"};case"x":case"left":case"right":return{main:"w",sec:"h"};default:return{}}}static axisBySizeKeyOrAlign(t){switch(t){case"h":case"top":case"bottom":return{main:"y",sec:"x"};case"w":case"left":case"right":return{main:"x",sec:"y"};default:return{}}}get initPad(){return{top:0,bottom:50,right:0,left:50}}get padding(){var t;const e=(t,e,s)=>{const a=10,{main:n}=this.constructor.sizeKeyByAlignOrAxis(s);t[s]=Math.max(t[s],e[n]+a)},s={...this.initPad};return this.chartData.legend&&e(s,this.legendSectionSize,this.chartData.legend.position),null!==(t=this.chartData.info)&&void 0!==t&&t.disable||e(s,this.infoSectionSize,this.chartData.info.position),s}get extraPadForData(){return{top:30,bottom:30,right:30,left:30}}get totalPad(){const{padding:t,extraPadForData:e}=this,s=t=>{const{infoSectionsPos:e}=this;for(let s of[e.info,e.legend])if(!s.disable&&[s.align,s.position].includes(t))return 50;return 0};return{top:t.top+e.top+s("top"),bottom:t.bottom+e.bottom+s("bottom"),right:t.right+e.right+s("right"),left:t.left+e.left+s("left")}}calcSectionRenderPos(t,e,{position:s,align:a,disable:n}){const{extraPadForData:i}=this,o={position:s,align:a,x:e.w/2-t.w/2,y:e.h/2-t.h/2,disable:n},{main:r,sec:l}=this.constructor.sizeKeyByAlignOrAxis(s),{main:c,sec:d}=this.constructor.axisBySizeKeyOrAlign(s);switch(a){case"start":o[d]="y"===d?i.top:i.left;break;case"end":o[d]=e[l]-t[l]-("y"===d?i.bottom:i.right);break;case"middle":case"center":break}switch(s){case"top":o.y=i.top;break;case"bottom":o.y=e.h-t.h-i.bottom;break;case"right":o.x=e.w-t.w-i.right;break;case"left":o.x=i.left;break;case"middle":case"center":break}return o}get infoSectionsPos(){var t,e;const{size:s,infoSectionSize:a,legendSectionSize:n,chartData:i}=this;return{info:this.calcSectionRenderPos(a,s,{position:i.info.position,align:i.info.align,disable:!!i.info.disable}),legend:this.calcSectionRenderPos(n,s,{position:null===(t=i.legend)||void 0===t?void 0:t.position,align:null===(e=i.legend)||void 0===e?void 0:e.align,disable:!!i.legend})}}get infoSectionSize(){const t=this.chartData.info.size||30,e=t/3*2,s=this.chartData.data.length,a=s*t+(s-1)*e,n=this.chartData.data.reduce((t,e)=>e.tag.length>t.length?e.tag:t,""),i=Pa.getTextPxSize(n,t,this.textStyle.font);return{lineHeight:t,gap:e,h:a,w:t+e+i}}get legendSectionSize(){var t,e;const s=(null===(t=this.chartData.legend)||void 0===t?void 0:t.size)||50;return{h:s,w:Pa.getTextPxSize(null===(e=this.legend)||void 0===e?void 0:e.tag,s,this.textStyle.font)}}getChartInfoRenderData(){var t;const{chartData:e}=this,s=this.textStyle,a=[],n=2;if(null===(t=e.info)||void 0===t||!t.disable){const t=this.infoSectionSize,i=this.infoSectionsPos.info;a.push(...e.data.reduce((e,a,o)=>{const r=i.y+(t.lineHeight+t.gap)*o,l={item:a};return e.push({style:{...s,textBaseline:"top"},text:a.tag,x:i.x+t.lineHeight,y:r,w:t.lineHeight,hoveredData:l,zIndex:n},{style:{fillStyle:this.constructor.getClrFromStyle(a.style,o),strokeStyle:"gray"},x:i.x,y:r,w:t.lineHeight,h:t.lineHeight,hoveredData:l,zIndex:n}),e},[]))}if(e.legend){const t=this.infoSectionsPos.legend;a.push({...t,w:this.legendSectionSize.h,isCenterPos:!0,text:e.legend.tag,style:{...s,textBaseline:"top",textAlign:"start"},zIndex:n})}return a}getGridRenderData(){const t=[],{chartData:e}=this,{start:s,end:a,minVal:n,maxVal:i,mainAxis:o,secAxis:r,yByVal:l,xByVal:c,yByIdx:d,xByIdx:u}=this.chartDataUtils,h={strokeStyle:"gray",lineWidth:3},p=this.extraPadForData;t.push({style:h,geoShape:[{x:s.x-p.left/2,y:s.y-p.top},{x:s.x-p.left/2,y:a.y+p.bottom}]},{style:h,geoShape:[{x:s.x-p.left,y:a.y+p.bottom/2},{x:a.x+p.left/2,y:a.y+p.bottom/2}]});const g=this.textStyle,m=[parseInt(n),parseInt(i)];n<0&&i>0&&m.push(0);const f=i-n,y=parseInt(f/8);for(let b=0;b<f/y;b++){const t=parseInt(n+y*b);Math.abs(i-t)<y||Math.abs(n-t)<y||Math.abs(0-t)<y||m.push(t)}const v="y"===r?m:e.labels;t.push(...v.reduce((t,e,n)=>{const i="y"===r?l(e):d(n);return t.push({x:s.x-1.5*p.left,y:i,w:g.size,text:e.toString(),style:{...g,textBaseline:"middle",textAlign:"right"}},{geoShape:[{x:s.x-p.left/2,y:i},{x:a.x+p.bottom/2,y:i}],style:{...h,lineWidth:1}}),t},[]));const x="x"===o?e.labels:m.reverse();return t.push(...x.reduce((t,e,n)=>{const i="x"===o?u(n):c(e);return t.push({x:i-p.left/2,y:a.y+p.bottom,w:g.size,text:e.toString(),style:{...g,textBaseline:"top",textAlign:"center"}},{geoShape:[{x:i,y:s.y-p.top},{x:i,y:a.y+p.bottom/2}],style:{...h,lineWidth:1}}),t},[])),t}fullGraphDataToRender(){return[...this.getGridRenderData(),...this.getChartInfoRenderData()]}getCahrtDataToRender(){return[...this.fullGraphDataToRender()]}get animationSteps(){let t="0".repeat(100).split("").map((t,e)=>(e+1)/100);return t=t.filter(t=>100*t%2===0),t}getAnimationFrames(){const t=this.chartData.data,e=[],{animationSteps:s}=this;for(let a of s)e.push(this.getCahrtDataToRender(t.map(t=>{var e;return{c:t,vals:null===(e=t.vals)||void 0===e?void 0:e.map(t=>t*a),val:t.val*a}})));return e}}Object(it["a"])(va,"defaultColors",["#abcdeb","#fdaaaa","#b4ffd9","#fcfdcd","#f2ddff"]);class xa extends va{getCahrtDataToRender(t){const{secByVal:e,mainByIdx:s,mainAxis:a,secAxis:n}=this.chartDataUtils;return t||(t=this.chartData.data),[...this.fullGraphDataToRender(),...t.map((t,i)=>({style:{strokeStyle:this.constructor.getClrFromStyle(t.style,i),lineWidth:5,lineCap:"round"},geoShape:t.vals.map((t,i)=>({[a]:s(i),[n]:e(t)}))}))]}}class ba extends va{init(){this.strictItemSize=!0,super.init()}getCahrtDataToRender(t){const{chartData:e}=this,{secByVal:s,mainByIdx:a,mainAxis:n,secAxis:i,dataAreaSize:o,mainSizeKey:r}=this.chartDataUtils;t||(t=this.chartData.data);const l=5,c=o[r]/e.labels.length/e.data.length-l;return[...this.fullGraphDataToRender(),...t.reduce((t,o,r)=>(t.push(...o.vals.map((t,d)=>{var u;return{geoShape:[{[i]:s(0),[n]:a(d)+c*r+l*r},{[i]:s(t),[n]:a(d)+c*r+l*r},{[i]:s(t),[n]:a(d)+c*(r+1)+l*r},{[i]:s(0),[n]:a(d)+c*(r+1)+l*r}],style:{fillStyle:this.constructor.getClrFromStyle(o.style,r)},hoveredData:{item:o,val:t,label:null===(u=e.labels)||void 0===u?void 0:u[d]}}})),t),[])]}}class Sa extends va{static getItemVal(t){var e;let s=t.val||(null===(e=t.vals)||void 0===e?void 0:e[0])||0;return s<0&&(s=0),s}get size(){var t;return{w:1e3,h:null!==(t=this.chartData.info)&&void 0!==t&&t.disable?1e3:800}}get initPad(){return{top:0,bottom:0,right:0,left:0}}get extraPadForData(){return{top:0,bottom:0,right:0,left:0}}init(){this.chartData.info.position="left",this.initService()}get piSize(){const{dataAreaSize:t}=this.chartDataUtils;return Math.min(t.w,t.h)}get piPos(){const{size:t}=this,{dataAreaSize:e,start:s}=this.chartDataUtils;return{x:s.x+e.w/2,y:s.y+e.h/2}}get baseCircleItem(){return{...this.piPos,w:this.piSize,h:this.piSize,circleDegries:360,style:{strokeStyle:"white",lineWidth:7.5}}}getCahrtDataToRender(){const{chartData:t}=this,e=t.data.reduce((t,e)=>t+this.constructor.getItemVal(e),0);let s=0;return[...this.getChartInfoRenderData(),...t.data.map((t,a)=>{const n=this.constructor.getItemVal(t),i=n/e,o=s,r=o+360*i;return s=r,{...this.baseCircleItem,circleDegries:[o,r],closeCircle:!0,style:{...this.baseCircleItem.style,fillStyle:this.constructor.getClrFromStyle(t.style)},hoveredData:{item:t,val:n}}})]}getAnimationFrames(){const t=this.getCahrtDataToRender(),e=[],s=this.animationSteps;for(let a=0;a<s.length;a++){const n=t.map(t=>t.clearCircle?t:{...t,circleDegries:Array.isArray(t.circleDegries)?t.circleDegries.map(t=>t*s[a]):t.circleDegries*s[a]});e.push(n)}return e}}class wa extends Sa{get donatHoleSize(){return this.piSize/2}get centerCircle(){return{...this.baseCircleItem,w:this.donatHoleSize,h:this.donatHoleSize}}findRenderedItemPosMatch(t){const e=super.findRenderedItemPosMatch(t);return e&&!ht.isPosOnItem(t,this.centerCircle)&&e}getCahrtDataToRender(){return[...super.getCahrtDataToRender(),{clearCircle:!0,...this.centerCircle,closeCircle:!0,style:{clear:!0}},{...this.centerCircle}]}}class Ca extends wa{get donatHoleSize(){return.9*this.piSize}}class Aa extends Ca{init(){this.chartData.info.position="center",this.chartData.info.size=60,this.initService()}get size(){return{w:1e3,h:1e3}}}class Da extends fa{constructor(t={width:100,height:100,data:[]},e,s=!1){super(t,e),Object(it["a"])(this,"calcedDataCash",null),Object(it["a"])(this,"getheatPointsToRender",(()=>{const t=(t,e=1)=>(t>1?t=1:t<0&&(t=0),`hsla(${200*(1-t)},100%,50%,${e})`),e=(e,s,a,n)=>{const i=(a+1)/n,o=(n-a)/n,r=s*i,l=140*s,c=.6*l*s,d=l-c,u=c+d*o,h=2e3;return{...e,id:e._id||makeId(),style:{shadowColor:t(r),shadowOffsetY:e.y+h},x:e.x,y:-h,w:u,h:u,circleDegries:360,zIndex:1+r}},s=t=>{const s=this.sevirityByNegs(t.negsCount,t.negsDistAvg),a=10,n=[];for(let i=0;i<a;i++)n.push(e(t,s,i,a));return n};return t=>t.data.reduce((t,e)=>[...t,...s(e)],[])})()),this.autoCalc=s,this.init()}updateData(t){this.calcedDataCash=null,super.updateData(t)}get heatData(){return this.chartData}getCahrtDataToRender(){return this.getheatPointsToRender(this.calcedData)}get calcedData(){return this.calcedDataCash||(this.calcedDataCash=this.autoCalc?this.constructor.calcHeatMapData(this.heatData):this.heatData),this.calcedDataCash}sevirityByNegs(t=0,e=0){const s=1-e/this.heatData.negMaxDist,a=1-t/this.heatData.maxNegsCount,n=.25,i=1-n,o=s*n+a*i;return 1-o}}Object(it["a"])(Da,"calcHeatMapData",(()=>{const t=300,e=1e4;function s(s={x:0,y:0},a){const n=a.length>=e?parseInt(a.length/5):1/0;let i=0;const o=[];for(let e=0;e<a.length;e++){const r=a[e];if(r._id===s._id)continue;const l=Math.abs(s.x-r.x),c=Math.abs(s.y-r.y),d=Math.sqrt(l**2+c**2);if(d<=t&&(o.push(r),i+=d),o.length>=n)break}const r=o.length;return{negs:o,total:r,distAvg:i/r}}return e=>{const a=e.data;let n=0;const i=a.map(t=>{const e=s(t,a);return e.total>n&&(n=e.total),{...t,negsCount:e.total,negsDistAvg:e.distAvg}});return{data:i,negMaxDist:t,maxNegsCount:n}}})());const Pa={getDeepKey:function(t="",e="",s=!1){return t?s?`${t}[${e}]`:`${t}.${e}`:e},fillData:function(t,e,s=[],a=""){if(s.includes(a)&&!t)return t;if("object"!==typeof t)return t;if(Array.isArray(t))return t.map((t,n)=>Pa.fillData(t,e[n],s,Pa.getDeepKey(a,n,!0)));const n={...t};for(let i in e){const o=Pa.getDeepKey(a,i,!1);"object"===typeof t[i]&&(n[i]=Pa.fillData(t[i],e[i],s,o)),s.includes(o)&&!t[i]||(t[i]||(n[i]=e[i]))}return n},getTextPxSize:function(t,e,s="Ariel"){const a=document.createElement("canvas").getContext("2d");a.font=`${e}px ${s}`;const n=a.measureText(t).width;return n}};var _a={name:"about-page",data(){return{charts:[]}},mounted(){this.mountCharts()},destroyed(){this.charts.forEach(t=>t.destroy()),this.charts=[]},methods:{mountCharts(){const t=t=>"0".repeat(t).split("").map((t,e)=>e),e=(t=-infinity,e)=>Math.floor(Math.random()*(e-t)+t),s=["Sep","Oct","Nov","Dec","Jan","Feb"],a=(a=!1)=>t(s.length).map(t=>e(a?-50:0,100)),n=()=>({data:[{tag:"Data sample 1",vals:a(),style:{color:"#abcdeb"}},{tag:"Data sample 2",vals:a(),style:{color:"#fdaaaa"}},{tag:"Data sample 3",vals:a(),style:{color:"#b4ffd9"}},{tag:"Data sample 4",vals:a(),style:{color:"#fcfdcd"}},{tag:"Data sample 5",vals:a(),style:{color:"#f2ddff"}}],labels:s,horizontal:!1,labelsNegative:!0,dataNegative:!1,info:{disable:!0,size:40,position:"right",align:"middle"}});this.charts=[new wa(n(),".donat-container"),new ba(n(),".bar-container"),new ba({...n(),data:[{tag:"Data sample 1",vals:a(!0),style:{color:"#abcdeb"}},{tag:"Data sample 2",vals:a(!0),style:{color:"#fdaaaa"}},{tag:"Data sample 3",vals:a(!0),style:{color:"#b4ffd9"}},{tag:"Data sample 4",vals:a(!0),style:{color:"#fcfdcd"}},{tag:"Data sample 5",vals:a(!0),style:{color:"#f2ddff"}}]},".bar2-container"),new ba({...n(),horizontal:!0},".bar3-container"),new xa(n(),".line-container"),new Ca(n(),".disc-container"),new Sa(n(),".pi-container"),new Aa({...n(),info:{disable:!1}},".frame-container")]}}},Oa=_a,La=(s("823b"),Object(g["a"])(Oa,ga,ma,!1,null,"1fe8b317",null)),za=La.exports;const Ma=[{name:"DashboardApp",path:"/dashboard",component:pa,children:[{name:"DashboardPage",path:"/",component:za}]}];var Ea=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ed-app inner-app"},[e("router-view",{staticClass:"inner-app-content"})],1)},ka=[],Ia={},Ra=Object(g["a"])(Ia,Ea,ka,!1,null,null,null),Ta=Ra.exports,ja=function(){var t=this,e=t._self._c;return e("div",{staticClass:"map-page flex column space-between"},[t.userLocation?e("div",{staticClass:"chat-section flex column gap10"},[e("h2",[t._v("Say something!")]),e("form",{staticClass:"flex align-center gap10",on:{submit:function(e){return e.preventDefault(),t.sendMsg.apply(null,arguments)}}},[e("FormInput",{attrs:{type:"select",placeholder:"Send a message!",itemsMap:t.msgMap},model:{value:t.msgTxt,callback:function(e){t.msgTxt=e},expression:"msgTxt"}}),e("button",[t._v(t._s(t.$t("send")))])],1)]):t._e(),e("div",{ref:"elMapContainer",staticClass:"google-map"})])},Ba=[];let $a={};const Fa=t=>$a=t,Na=t=>$a[t]||t,Ua="ed-app/msg";function qa(){return J.get(Ua+"/")}function Ya(t){return J.put(Ua+"/",t)}const Ha={setMsgMap:Fa,transMsg:Na,getMsgs:qa,updateMsgs:Ya};var Wa=s("7489");let Xa="";const Ja=t=>Xa=t;async function Va(t,e={lat:0,lng:0}){const s=await Ga();return s.err?s:new google.maps.Map(t,{center:e,zoom:15,mapId:"GOOGLE_MAP_ELEMENT"})}async function Ga(){if(window.google)return{};const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key="+Xa,t.async=!0,document.body.append(t);const e=await new Promise((e,s)=>{t.onload=e,t.onerror=t=>e({err:"cantConnectGoogleApi"})});return nn(),e}function Za(t){return fetch(Ka(t)).then(t=>t.json())}function Ka(t){return`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${Xa}`}function Qa(t,e,s=tn()){return s.classList.add("map-marker"),new an(e,t,s)}function tn(){const t=document.createElement("div");return t}function en(t){t.onRemove()}const sn={setApiKey:Ja,initMap:Va,getCoordBySearchStr:Za,addElementToMap:Qa,removeElementFromMap:en};var an;function nn(){an=class extends google.maps.OverlayView{constructor(t,e,s){super(),this.position=t,this.html=s,this.setMap(e)}updatePosition(t){this.position=t,this.draw()}onAdd(){let t;"string"===typeof this.html?(t=document.createElement("div"),t.innerHTML=this.html):t=this.html,t.style.position="absolute",this.getPanes().overlayMouseTarget.appendChild(t),this.div=t}draw(){let t=this.getProjection().fromLatLngToDivPixel(this.position);t&&(this.div.style.left=t.x+"px",this.div.style.top=t.y+"px")}onRemove(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)}}}const on={getElType:rn,El:ln,StyleEl:cn,dataToCss:dn};function rn(t){return"<"===t[0]&&">"===t[t.length-1]?"/"===t[1]?t.split("/")[1].split(" ")[0].split(">")[0]:t.split("<")[1].split(" ")[0].split(">")[0].split("/")[0]:void 0}function ln(t="",e={},s=[]){let a="div";const n=rn(t);"tr"===n?a="table":"td"===n&&(a="tr");const i=document.createElement(a);i.innerHTML=t;const o=i.firstChild;for(let r in e)o[r]=e[r];return s.forEach(t=>t&&o.appendChild(t)),o}function cn(t="",e={}){return ln(`<style>${dn(t,e)}</style>`)}function dn(t="",e={},s=0){const a="\t".repeat(s);let n=`${a}${t} {`,i="";for(let o in e){const s=e[o];if(o=un(o),"object"===typeof s){const e="@"===o[0];if(e){i+=o+" {\n";const e=o.split(" ")[0].split("@")[1];if("keyframes"===e)for(let t in s)i+=dn(t,s[t]);else i+=dn(t,s,1);i+="}\n"}else{let e=t;"&"===o[0]?e+=o.slice(1):e+=" "+o,i+=dn(e,s)}}else n+=`\n${a}\t${o}: ${s};`}return n+=`\n${a}}\n`,n+=i,n}function un(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let s="";for(let a=0;a<t.length;a++){let n=t[a],i=n.toLowerCase();e.includes(n)?0===a?s+=i:t[a-1]&&" "!==t[a-1]&&(s+="-"+i):s+=i}return s}const hn=on.El,pn={};function gn(t,e,s){var a;const n=null===(a=pn[e._id])||void 0===a?void 0:a.el;if(!n)return mn(t,e,s);const i=fn(e,s),o=n.querySelector("ul");o.innerHTML=i.querySelector("ul").innerHTML,pn[e._id].preview.updatePosition(e.location)}function mn(t,e,s){const a=fn(e,s),n=sn.addElementToMap(t,e.location,a);return pn[e._id]={el:a,preview:n},n}function fn(t,e){const s=hn("<ul hidden></ul>",{},t.msgs.length?t.msgs.map(t=>hn(`<li>${Ha.transMsg(t.txt)}</li>`)):[hn("<li>No messages..</li>")]),a=hn(`<div class="account-map-preview ${yn(t)}"></div>`,{},[hn(`<p>${t.username}</p>`,{onclick:()=>s.hidden=!s.hidden}),hn('<input type="checkbox"/>',{checked:!!e.find(e=>e._id===t._id)||"",oninput:e=>rt.emit("map-user-selected",{account:t,ev:e,val:e.target.checked})}),s]);return a}function yn(t){return"account-map-preview-"+t._id}function vn(t){sn.removeElementFromMap(pn[t._id].preview),delete pn[t._id]}function xn(){for(let t in pn)vn({_id:t})}const bn={addAccountMapPreview:mn,updateAccountMapPreview:gn,removeAccountFromMap:vn,createAccountMapEl:fn,clearAllAccountsData:xn};var Sn=s("cefe"),wn=s.n(Sn);function Cn({type:t="danger",msg:e="",html:s="",timeout:a=7e3}={},n){const i=`<style>\n    ${on.dataToCss(".toast-alert",{position:"fixed",zIndex:20,top:"40px",right:"50%",transform:"translateX(50%)",padding:"10px",borderRadius:"4px",fontStyle:"italic",width:"370px",boxShadow:wn.a.lightShadow,"&.success":{backgroundColor:"#95f495",".prime-msg":{}},"&.warning":{backgroundColor:"yellow",".prime-msg":{}},"&.danger":{backgroundColor:"#FFF5F5",".prime-msg":{"&::before":{marginInlineEnd:"5px"}}},a:{fontWeight:"bold",cursor:"pointer",textDecoration:"underline"},"@keyframes fadeaway":{"0%":{opacity:"100%"},"100%":{opacity:"0%"}},"&.fade":{animationName:"fadeaway",animationDuration:"1s"},".close-btn":{position:"absolute",top:"3px",right:"3px",backgroundSize:"10px 10px",width:"10px",height:"10px",content:'"X"'},"@media (max-width: 420px)":{width:"90vw",textAlign:"center",".sec-msg":{display:"flex",flexDirection:"column",alignItems:"center"}}})}\n  </style>`;let o,r=!1;const l=()=>{r||(r=!0,document.body.removeChild(o),null===n||void 0===n||n())};return o=on.El(`<div class="toast-alert ${t}">\n    ${i}\n    ${e?`<p class="prime-msg">${e}</p>`:""}\n    ${s||""}\n  </div>`,{},[on.El('<button class="close-btn"></button>',{onclick:l})]),document.body.appendChild(o),a&&(setTimeout(()=>{r||o.classList.add("fade")},a-900),setTimeout(()=>{l()},a)),l}class An{constructor(t="body",e=!1,s=Ln()){Object(it["a"])(this,"id",0),Object(it["a"])(this,"idClass",""),Object(it["a"])(this,"RootClass","A-Alert"),Object(it["a"])(this,"pasitionClass","alert-fixed"),Object(it["a"])(this,"compactClass","compact-alert"),Object(it["a"])(this,"parentSelector",""),Object(it["a"])(this,"styleTemplateStr",""),Object(it["a"])(this,"state",{type:"",msg:"",placeHolder:"",reject:void 0,resolve:void 0}),Object(it["a"])(this,"Confirm",(t="")=>this._seStatePromise("confirm",t,"")),Object(it["a"])(this,"Alert",(t="")=>this._seStatePromise("alert",t,"")),Object(it["a"])(this,"Prompt",(t="",e="")=>this._seStatePromise("prompt",t,e)),Object(it["a"])(this,"_show",()=>{const t=this._render();var e=document.querySelector("."+this.idClass);if(!e){e=document.createElement("div"),e.classList=`${this.RootClass} ${this.idClass} ${this.pasitionClass}`;let t=document.querySelector(this.parentSelector);t.offsetWidth<400&&e.classList.add(this.compactClass),t.appendChild(e)}e.innerHTML=t,e.classList.add(this.state.type);try{e.querySelector(".a-alert-prompt-form").onsubmit=t=>this._promptResolve(t)}catch(s){}try{e.querySelector(".a-alert-reject-btn").onclick="confirm"===this.state.type?this._alertResolveFalse:this._alertResolveUndefined}catch(s){}try{e.querySelector(".a-alert-confirm-btn").onclick=this._alertResolveTrue}catch(s){}}),Object(it["a"])(this,"_hide",(t,e)=>{var s=this.state.type;this.state.isPending=!1,this.state.msg="",this.state.type="",this.state.placeHolder="",this.state.resolve=void 0,this.state.reject=void 0;var a=document.querySelector("."+this.idClass);return a.classList.remove(s),a.innerHTML=null,t(e)}),Object(it["a"])(this,"_alertResolveTrue",()=>this.state.resolve(!0)),Object(it["a"])(this,"_alertResolveFalse",()=>this.state.resolve(!1)),Object(it["a"])(this,"_alertResolveUndefined",()=>{this.state.resolve()}),Object(it["a"])(this,"_alertReject",()=>this.state.reject()),Object(it["a"])(this,"_promptResolve",t=>{t.preventDefault();var e=t.target.querySelector("input").value;if(e.length)return t.target.querySelector("input").value="",this.state.resolve(e)}),Object(it["a"])(this,"_seStatePromise",(t,e="",s="")=>this.state.isPending?Promise.reject("NOTE: can not set new alert becouse another alert is already in pending state."):(this.state.isPending=!0,this.state.type=t,this.state.msg=e,this.state.placeHolder=s,this._show(),new Promise((t,e)=>{this.state.resolve=e=>this._hide(e=>t(e),e),this.state.reject=()=>this._hide(e)}))),this.parentSelector=t,this.id=An.counter++,e&&(this.pasitionClass="alert-absolute"),this.styleTemplateStr=s,this.idClass="ALERT"+this.id}_render(){var{msg:t,type:e,placeHolder:s}=this.state;return`\n            ${this.styleTemplateStr}\n            <div class="alert-screen"></div>\n            <section class="alert-modal">\n                <p class="msg">${t}</p>\n                ${"prompt"===e&&`\n                    <form class="a-alert-prompt-form">\n                        <input type="text" placeholder="${s}"/>\n                        <button>Submit</button>\n                    </form>\n                    <button class="a-alert-reject-btn">Close</button>\n                `||`\n                    <div class="a-alert-buttons-container">\n                        ${"confirm"===e?'\n                            <button class="a-alert-confirm-btn">Confirm</button>\n                            <button class="a-alert-reject-btn">Cancel</button>\n                        ':'\n                            <button class="a-alert-reject-btn">Close</button>\n                        '}\n                    </div>\n                `}\n            </section>\n            `}}Object(it["a"])(An,"counter",0);const{Alert:Dn,Prompt:Pn,Confirm:_n}=new An,On={toast:Cn,A_Alert:An,Alert:Dn,Prompt:Pn,Confirm:_n};function Ln(){return{name:"alert-style",template:"\n            <style>\n                .A-Alert .alert-screen {\n                    top: 0;\n                    right: 0;\n                    background-color: rgba(0, 0, 0, 0.01);\n                    z-index: 29;\n                }\n                .A-Alert.alert-absolute .alert-screen {\n                    position: absolute;\n                    height: 100%;\n                    width: 100%;\n                }\n                .A-Alert.alert-fixed .alert-screen {\n                    position: fixed;\n                    width: 100%;\n                    height: 100vh;\n                }\n    \n                .A-Alert .alert-modal {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                    color: black;\n                    background-color: #fff;\n                    border: 1px solid rgb(165, 12, 12);\n                    border-radius: 20px;\n                    width: 350px;\n                    max-width: 98%;\n                    padding: 20px;\n                    z-index: 30 !important;\n                    right: 50%;\n                    bottom: 50%;\n                    transform: translate(50%, 50%);\n                    font-family: Verdana, Geneva, Tahoma, sans-serif;\n                }\n                .A-Alert.compact-alert.alert-absolute .alert-modal {\n                    width: 75%;\n                }\n                .A-Alert.alert-absolute .alert-modal {\n                    position: absolute;\n                }\n                .A-Alert.alert-fixed .alert-modal {\n                    position: fixed;\n                    top: 12vh;\n                    bottom: unset;\n                    transform: translate(50%, 0);\n                }\n    \n                .A-Alert .alert-modal > * {\n                    text-align: center;\n                    width: 100%;\n                    margin: 20px 0;\n                }\n    \n                .A-Alert .alert-modal .a-alert-buttons-container, \n                .A-Alert .alert-modal .a-alert-prompt-form {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-around;\n                    flex-wrap: wrap;\n                }\n                .A-Alert .alert-modal .a-alert-buttons-container >*, \n                .A-Alert .alert-modal .a-alert-prompt-form >* {\n                    margin: 5px;\n                }\n    \n                .A-Alert .alert-modal button {\n                    background: unset;\n                    \x3c!-- font-size: 1rem; --\x3e\n                    font-size: 0.8rem;\n                    border: 1px solid rgb(165, 12, 12);\n                    border-radius: 7.5px;\n                    outline: unset;\n                    color: rgb(165, 12, 12);\n                    width: fit-content;\n                }\n                .A-Alert .alert-modal button:hover {\n                    cursor: pointer;\n                }\n                .A-Alert .alert-modal button:active {\n                    cursor: pointer;\n                    border: 1px solid #eca1a1;\n                    color: #eca1a1;\n                }\n\n                .A-Alert .alert-modal input {\n                    width: 60%;\n                    outline: none;\n                    padding: 5px;\n                    padding-left: none;\n                    border: unset;\n                    background: unset;\n                    border-bottom: 1px solid black;\n                }\n    \n                \n                @media (max-width: 400px) {\n                    .A-Alert.alert-fixed .alert-modal {\n                        width: 80vw;\n                    }\n                }\n    \n            </style>\n    "}.template}var zn={name:"MapPage",data(){return{chatData:{accounts:[],msgs:[]},room:"",msgTxt:"",msgTo:[],msgMap:{},userLocation:null,map:null,autoLocationInterval:null}},async mounted(){this.init()},destroyed(){this.disconnectEvents()},computed:{accountsToShow(){const t=[],e=this.chatData.msgs;for(let s of this.chatData.accounts)t.push({...s,msgs:e.filter(t=>t.from._id===s._id)});return t}},methods:{async connectEvents(){await Q.connect(),Q.on("map_room_data",t=>{this.chatData=t,t.msgMap&&(this.msgMap=t.msgMap,Ha.setMsgMap(t.msgMap)),this.accountsToShow.forEach(t=>bn.updateAccountMapPreview(this.map,t,this.msgTo))}),Q.on("new_map_message",t=>{On.toast({type:"success",timeout:5e3,msg:`${t.from.username} says: ${Ha.transMsg(t.txt)}`})}),rt.on("map-user-selected",({account:t,val:e,ev:s})=>{this.toggleAccountToMsg(t)})},disconnectEvents(){Q.emit("leave_map_room"),Q.off("new_map_message"),Q.off("map_room_data"),rt.off("map-user-selected"),clearInterval(this.autoLocationInterval),bn.clearAllAccountsData()},async sendMsg(){if(!this.msgTxt)return;const t=await this.getUserLocation(),e={txt:this.msgTxt,to:this.msgTo,location:t};Q.emit("send_map_message",e),this.msgTxt=""},async getUserLocation(){const t=await Object(Wa["getGeoLocation"])();return t.err&&this.handleError({err:"error getting geo lofation - "+t.err}),this.userLocation=t,t},isAccountInMsg(t){return-1!==this.accountInMsgIdx(t)},accountInMsgIdx(t){return this.msgTo.findIndex(e=>e._id===t._id)},toggleAccountToMsg(t){const e={...t,msgs:void 0};this.isAccountInMsg(t)?this.msgTo.splice(this.accountInMsgIdx(e,1)):this.msgTo.push(e)},async updateUserLocation(){const t=await this.getUserLocation();Q.emit("update_user_location",t)},async init(){sn.setApiKey(this.$store.getters["settings/settings"].GOOGLE_API_KEY);const t=await this.getUserLocation();await this.initMap(),Q.emit("join_map_room",t),this.connectEvents(),this.autoLocationInterval=setInterval(this.updateUserLocation,5e3)},async initMap(){const t=await sn.initMap(this.$refs.elMapContainer,this.userLocation);t.err&&this.handleError({err:"error getting loading map - "+t.err}),this.map=t},handleError(t){throw On.toast({type:"danger",msg:"Error: "+t.err}),t}},components:{FormInput:we}},Mn=zn,En=(s("beae"),Object(g["a"])(Mn,ja,Ba,!1,null,null,null)),kn=En.exports,In=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container msgs-page flex column gap10"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.saveMsgs.apply(null,arguments)}}},[e("ul",{staticClass:"flex column gap15"},t._l(t.msgs,(function(s){return e("li",{key:s._id,staticClass:"flex align-center gap15"},[e("FormInput",{attrs:{label:"emoji"},model:{value:s.ui,callback:function(e){t.$set(s,"ui",e)},expression:"msg.ui"}}),e("FormInput",{attrs:{label:"maxDistM"},model:{value:s.maxDistM,callback:function(e){t.$set(s,"maxDistM",e)},expression:"msg.maxDistM"}}),e("FormInput",{attrs:{label:"name"},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"msg.name"}})],1)})),0),e("button",[t._v(t._s(t.$t("save")))])])])},Rn=[],Tn={name:"MsgsPage",data(){return{msgs:[]}},methods:{async saveMsgs(){const t=await this.$store.dispatch({type:"ed/updateMsgs",msgs:this.msgs});this.msgs=JSON.parse(JSON.stringify(t))},async loadMsgs(){this.msgs=await this.$store.dispatch("ed/loadMsgs")}},created(){this.loadMsgs()},components:{FormInput:we}},jn=Tn,Bn=Object(g["a"])(jn,In,Rn,!1,null,null,null),$n=Bn.exports;const Fn=[{name:"EdApp",path:"/ED",component:Ta,children:[{name:"EdMapPage",path:"/",component:kn},{name:"EdMsgEdit",path:"msgs",component:$n}]}];a["a"].use(Lt["a"]);const Nn=[...oe,...Ne,...Js,...la,...Ma,...Fn],Un=new Lt["a"]({mode:"hash",routes:Nn});var qn=s("2f62");const Yn=()=>({isLoading:!0,error:""}),Hn={state:Yn(),getters:{isRootLoading:t=>t.isLoading,rootError:t=>t.error},mutations:{setRootLoading(t,{val:e}){t.isLoading=e},setError(t,{err:e}){t.error=e},resetCommonState(t){const e=Yn();for(let s in t)t[s]=e[s]}},actions:{resetState({commit:t}){t("account/resetState"),t("auth/resetState"),t("example/resetState")}}},Wn={common:Hn},Xn="auth",Jn={login:Vn,getUserInfo:Zn,logout:Gn,signup:Kn};function Vn(t){return J.post(Xn+"/login",t)}function Gn(){return J.post(Xn+"/logout")}function Zn(){return J.get(Xn+"/info")}function Kn(t){return J.post(Xn+"/signup",t)}const Qn=()=>({filter:{search:"",params:{}},pagination:{page:0,limit:10},sort:{}});async function ti({commit:t,dispatch:e},{do:s,onSuccess:a,onError:n,dontDelay:i=!1}){try{t({type:"setLoading",val:!0}),i||await q(200);const e=await s();if(e.err){if(!n)throw e;n(e)}else a&&a(e);return t({type:"setLoading",val:!1}),"object"===typeof e?JSON.parse(JSON.stringify(e)):e}catch(o){throw console.log(o),o.err&&n?n(o):On.toast({type:"danger",msg:`Error ${o.status||500}: ${o.err||o.message||o.msg||o.error||"internal error"}`}),setTimeout(()=>{t({type:"setLoading",val:!1})},3e3),o}}const ei={initFilterBy:Qn,StoreAjax:ti},si=()=>({loggedUser:null,isLoading:!1}),ai={namespaced:!0,state:si(),getters:{isLoading:t=>t.isLoading,loggedUser:t=>t.loggedUser,isAdmin:t=>{var e,s;return"admin"===(null===(e=t.loggedUser)||void 0===e?void 0:e.role)||(null===(s=t.loggedUser)||void 0===s?void 0:s.roles.includes("admin"))}},mutations:{setLoading(t,{val:e}){t.isLoading=e},setLoggedUser(t,{user:e}){t.loggedUser=e},resetState(t){const e=si();for(let s in t)t[s]=e[s]},updateOrgStatus(t,{organizationId:e,newStatus:s}){t.loggedUser.organizations.find(t=>t._id===e).status=s}},actions:{_Ajax:ei.StoreAjax,async login({commit:t,dispatch:e},{cred:s}){return e({type:"_Ajax",do:async()=>Jn.login(s),onSuccess:e=>{t({type:"setLoggedUser",user:e.user}),On.toast({type:"success",msg:`Welcome back, ${e.user.username}!`})}})},async getUserInfo({commit:t,dispatch:e}){return e({type:"_Ajax",do:async()=>Jn.getUserInfo(),onSuccess:e=>t({type:"setLoggedUser",user:e}),onError:()=>{}})},async logout({commit:t,dispatch:e}){return e({type:"_Ajax",do:async()=>Jn.logout(),onSuccess:s=>{t({type:"setLoggedUser",user:null}),On.toast({type:"success",msg:"Goodby"}),e("resetState",{},{root:!0})}})},async signup({commit:t,dispatch:e},{cred:s}){return e({type:"_Ajax",do:async()=>Jn.signup(s),onSuccess:e=>{t({type:"setLoggedUser",user:e.user}),On.toast({type:"success",msg:`Welcome, ${e.user.username}!`})}})}}},ni={auth:ai},ii=()=>({data:{items:[],total:0},selectedAccount:null,filterBy:ei.initFilterBy(),isLoading:!1}),oi={namespaced:!0,state:ii(),getters:{data:t=>t.data,accounts:t=>t.data.items,totalAccounts:t=>t.data.total,selectedAccount:t=>t.selectedAccount,filterBy:t=>t.filterBy,isLoading:t=>t.isLoading},mutations:{setProp(t,{key:e,val:s}){t[e]=s},setAccountData(t,{data:e}){t.data=e},setSelectedAccount(t,{item:e}){t.selectedAccount=e},removeAccount(t,{id:e}){},setFilterBy(t,{filterBy:e}){t.filterBy=e},setLoading(t,{val:e}){t.isLoading=e},resetState(t){const e=ii();for(let s in t)t[s]=e[s]}},actions:{_Ajax:ei.StoreAjax,async loadAccounts({commit:t,dispatch:e},{filterBy:s}){return e({type:"_Ajax",do:async()=>{s&&t({type:"setFilterBy",filterBy:s});const e=await ze.query(s);return e},onSuccess:e=>t({type:"setAccountData",data:e})})},async loadAccount({commit:t,dispatch:e},{id:s}){return e({type:"_Ajax",do:async()=>ze.get(s),onSuccess:e=>t({type:"setSelectedAccount",item:e})})},async removeAccount({commit:t,dispatch:e},{id:s}){if(await On.Confirm("Are you sure you want to remove this account?"))return e({type:"_Ajax",do:async()=>ze.remove(s),onSuccess:()=>On.toast({type:"success",msg:"Account removed successfully! id: "+s})})},async saveAccount({commit:t,dispatch:e},{item:s}){return e({type:"_Ajax",do:async()=>ze.save(s),onSuccess:()=>On.toast({type:"success",msg:"Account saved successfully! id: "+s._id})})}}},ri={account:oi},li="settings",ci={getSettings:di,updateSettings:ui};function di(){return J.get(li+"/")}function ui(t){return J.put(li+"/",t)}const hi=()=>({settings:null,isLoading:!1}),pi={namespaced:!0,state:hi(),getters:{settings:t=>t.settings,isLoading:t=>t.isLoading},mutations:{setSettings(t,{settings:e}){t.settings=e},setLoading(t,{val:e}){t.isLoading=e},resetState(t){const e=hi();for(let s in t)t[s]=e[s]}},actions:{_Ajax:ei.StoreAjax,async loadSettings({commit:t,dispatch:e}){return e({type:"_Ajax",do:async()=>{const t=await ci.getSettings();return t},onSuccess:e=>t({type:"setSettings",settings:e}),onError:t=>{},dontDelay:!0})},async updateSettings({commit:t,dispatch:e},{settings:s}){return e({type:"_Ajax",do:async()=>{const t=await ci.updateSettings(s);return t},onSuccess:e=>t({type:"setSettings",settings:e}),dontDelay:!0})}}},gi={settings:pi},mi="dashboard",fi={getDashboardData:yi};function yi(){return J.get(mi+"/")}const vi=()=>({data:null,isLoading:!1}),xi={namespaced:!0,state:vi(),getters:{data:t=>t.data,isLoading:t=>t.isLoading},mutations:{setData(t,{data:e}){t.data=e},setLoading(t,{val:e}){t.isLoading=e},resetState(t){const e=vi();for(let s in t)t[s]=e[s]}},actions:{_Ajax:ei.StoreAjax,async loadDashboardData({commit:t,dispatch:e}){return e({type:"_Ajax",do:async()=>{const t=await fi.getDashboardData();return t},onSuccess:e=>t({type:"setData",data:e}),onError:t=>{}})}}},bi={dashboard:xi},Si=()=>({msgs:null,isLoading:!1}),wi={namespaced:!0,state:Si(),getters:{msgs:t=>t.msgs,isLoading:t=>t.isLoading},mutations:{setMsgs(t,{msgs:e}){t.msgs=e},setLoading(t,{val:e}){t.isLoading=e},resetState(t){const e=Si();for(let s in t)t[s]=e[s]}},actions:{_Ajax:ei.StoreAjax,async loadMsgs({commit:t,dispatch:e}){return e({type:"_Ajax",do:async()=>{const t=await Ha.getMsgs();return t},onSuccess:e=>t({type:"setMsgs",msgs:e}),onError:t=>{}})},async updateMsgs({commit:t,dispatch:e},{msgs:s}){return e({type:"_Ajax",do:async()=>{const t=await Ha.updateMsgs(s);return t},onSuccess:e=>t({type:"setMsgs",msgs:e})})}}},Ci={ed:wi};a["a"].use(qn["a"]);var Ai=new qn["a"].Store({state:{},mutations:{},actions:{},modules:{commonStore:Wn,...ni,...ri,...gi,...bi,...Ci}}),Di=(s("6861"),s("a925")),Pi=s("0e40"),_i=s("9b5b");a["a"].use(Di["a"]);const Oi=new Di["a"]({locale:localStorage.locale||"en",messages:{en:Pi,he:_i}});var Li=Oi;a["a"].config.productionTip=!1,new a["a"]({router:Un,store:Ai,i18n:Li,render:t=>t(_t)}).$mount("#app")},"59f4":function(t,e,s){},"5b69":function(t,e,s){},6861:function(t,e,s){t.exports={fontSizeSmaller:"12px",fontSizeSmall:"100px",fontSizeNormal:"15px",fontSizeMedium:"17px",fontSizeBig:"18px",appFont:"sans-serif",smallScreenBreak:"800px",mediumScreenBreak:"1200px",bigScreenBreak:"1500px",clr1:"#000",clr2:"gray",clr3:"blue",clrSafe:"green",clrWarn:"#ff0",clrDanger:"red",lightShadow:"0px 0px 10px 1px rgba(0,0,0,0.1)"}},7489:function(t,e){async function s(){return navigator.geolocation?new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lng:e.coords.longitude})},e=>t({err:"errorGettingLocation",message:a(e)}))}):Promise.resolve({err:"notSuported"})}function a(t){switch(t.code){case t.PERMISSION_DENIED:return"permissionDenied";case t.POSITION_UNAVAILABLE:return"permissionUnavailable";case t.TIMEOUT:return"timeoutError";case t.UNKNOWN_ERROR:default:return"unknownError"}}t.exports={getGeoLocation:s}},"801d":function(t,e,s){},"823b":function(t,e,s){"use strict";s("59f4")},"8b82":function(t,e,s){"use strict";s("2768")},"8dc6":function(t,e,s){t.exports={fontSizeSmaller:"12px",fontSizeSmall:"100px",fontSizeNormal:"15px",fontSizeMedium:"17px",fontSizeBig:"18px",appFont:"sans-serif",smallScreenBreak:"800px",mediumScreenBreak:"1200px",bigScreenBreak:"1500px",clr1:"#000",clr2:"gray",clr3:"blue",clrSafe:"green",clrWarn:"#ff0",clrDanger:"red",lightShadow:"0px 0px 10px 1px rgba(0,0,0,0.1)"}},"9b5b":function(t){t.exports=JSON.parse('{"hello":"שלום","filter":"לפלטר","edit":"ערוך","submit":"שלח","signup":"הרשם","login":"התחבר","about":"אודות","settings":"הגדרות","example":"דוגמה","admin":"אדמין","logout":"התנתק","delete":"מחק","addNew":"הוסף חדש","darkMode":"מצב חשוך"}')},"9c83":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABHNCSVQICAgIfAhkiAAAAHhJREFUaIHt1zEOgDAMQ9GE+98ZJjO0GwJaW/8NiG7xECmuCtHD+1wyxXM9/ZRfCOn7U74hpI/VE7yFILuJW3ZxCzPODwAAgA/EHI1xZ7xrCKGzbycmSNyyi1sYOjsAAMAPYo7GuDPeNYTQ2bcTEyRu2cUtTF5nvwDang8iUay8OgAAAABJRU5ErkJggg=="},"9f10":function(t,e,s){},a5d4:function(t,e,s){},b028:function(t,e,s){},b3ff:function(t,e,s){"use strict";s("3e94")},beae:function(t,e,s){"use strict";s("3615")},cc8b:function(t,e,s){},cefe:function(t,e,s){t.exports={fontSizeSmaller:"12px",fontSizeSmall:"100px",fontSizeNormal:"15px",fontSizeMedium:"17px",fontSizeBig:"18px",appFont:"sans-serif",smallScreenBreak:"800px",mediumScreenBreak:"1200px",bigScreenBreak:"1500px",clr1:"#000",clr2:"gray",clr3:"blue",clrSafe:"green",clrWarn:"#ff0",clrDanger:"red",lightShadow:"0px 0px 10px 1px rgba(0,0,0,0.1)"}},d0f4:function(t,e,s){"use strict";s("9f10")},d12d:function(t,e,s){"use strict";s("34ae")},d1cc:function(t,e,s){"use strict";s("27d7")},e7e6:function(t,e,s){"use strict";s("801d")},e85b:function(t,e,s){"use strict";s("8dc6")},e874:function(t,e,s){"use strict";s("a5d4")},ef60:function(t,e,s){"use strict";s("5b69")}});
//# sourceMappingURL=app.4f092452.js.map